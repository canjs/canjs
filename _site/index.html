<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
<head>
<title>CanJS</title>
<link rel="stylesheet" type="text/css" href="stylesheets/styles.css">
<link rel="stylesheet" type="text/css" href="stylesheets/tango.css">
<link href='/favicon.ico' rel='shortcut icon' type='image/x-icon' />
</head>
<body>
<div id='bg'>
</div>
<div class='cf' id='wrapper'>
	<div id='menu-wrapper'>
		<div id='header'>
			<div id='logo-and-download'>
				<img alt="Logo" id="logo" src="images/logo.png"/>
				<a class='primary' href='https://github.com/downloads/jupiterjs/canjs/1.0b2.zip'>Download v1.0b2</a>
			</div>
		</div>
		<div class='cf' id='buttons'>
			<a href='https://forum.javascriptmvc.com/#Forum/canjs'>Forums</a>
			<a href='http://bitovi.com/blog/tag/canjs/'>Blog</a>
			<a href='https://twitter.com/canjsus'>Twitter</a>
		</div>
		<div id="inner-menu-wrap">
			<ul id='menu'></ul>
		</div>
		<a href='http://bitovi.com' id='developed-by'>
		<img alt="Bitovi" src="images/bitovi.png"/>
		</a>
	</div>
	<div id='content-wrapper'>
		<div id='content'>
			<a href="http://github.com/jupiterjs/canjs" class="github-fork"><img src="/images/github.png" alt="Fork me on GitHub"></a>
			<h1 id='welcome_to_canjs'>Welcome to CanJS!</h1>

<p>CanJS is an MIT-licensed, client-side, JavaScript framework that makes building rich web applications easy. It provides:</p>

<ul>
<li><strong><a href='#can_construct'>can.Construct</a></strong> - inheritable constructor functions</li>

<li><strong><a href='#can_observe'>can.Observe</a></strong> - key-value binding</li>

<li><strong><a href='#can_model'>can.Model</a></strong> - observes connected to a RESTful JSON interface</li>

<li><strong><a href='#can_view'>can.view</a></strong> - template loading, caching, rendering</li>

<li><strong><a href='#can_ejs'>can.EJS</a></strong> - live binding templates</li>

<li><strong><a href='#can_control'>can.Control</a></strong> - declarative event bindings</li>

<li><strong><a href='#can_route'>can.route</a></strong> - back button and bookmarking support</li>
</ul>

<p>It also includes a rich set of supported <a href='#plugins'>extensions and plugins</a>. CanJS is better, faster, easier, smaller, library-er. <a href='#why_canjs'>Learn why</a>.</p>

<h2 id='get_canned'>Get Canned</h2>

<p>CanJS&#8217;s core supports jQuery, Zepto, Dojo, YUI and Mootools. Select your download for the library you are using:</p>

<ul>
<li><a href='https://github.com/downloads/jupiterjs/canjs/can.jquery.1.0b2.js'>can.jquery.js</a> (<a href='https://github.com/downloads/jupiterjs/canjs/can.jquery.1.0b2.min.js'>min</a>) - 8.5k - <a href='http://donejs.com/can/docs/can.jquery.html'>Annotated Source</a></li>

<li><a href='https://github.com/downloads/jupiterjs/canjs/can.zepto.1.0b2.js'>can.zepto.js</a> (<a href='https://github.com/downloads/jupiterjs/canjs/can.zepto.1.0b2.min.js'>min</a>) - 10.2k - <a href='http://donejs.com/can/docs/can.zepto.html'>Annotated Source</a></li>

<li><a href='https://github.com/downloads/jupiterjs/canjs/can.dojo.1.0b2.js'>can.dojo.js</a> (<a href='https://github.com/downloads/jupiterjs/canjs/can.dojo.1.0b2.min.js'>min</a>) - 10.8k - <a href='http://donejs.com/can/docs/can.dojo.html'>Annotated Source</a></li>

<li><a href='https://github.com/downloads/jupiterjs/canjs/can.mootools.1.0b2.js'>can.mootools.js</a> (<a href='https://github.com/downloads/jupiterjs/canjs/can.mootools.1.0b2.min.js'>min</a>) - 10.7k - <a href='http://donejs.com/can/docs/can.mootools.html'>Annotated Source</a></li>

<li><a href='https://github.com/downloads/jupiterjs/canjs/can.yui.1.0b2.js'>can.yui.js</a> (<a href='https://github.com/downloads/jupiterjs/canjs/can.yui.1.0b2.min.js'>min</a>) - 10.2k - <a href='http://donejs.com/can/docs/can.yui.html'>Annotated Source</a></li>
</ul>

<p>This page walks through the basics of CanJS by building a small todo app with CanJS and jQuery. If you want to see a fully functional version of this todo app in action, you can <a href='http://jsfiddle.net/javascriptmvc/ADWhw/3/'>go to this jsfiddle and view the results and code.</a></p>

<p>The <a href='#use_with_other_libraries'>Use with other libraries</a> section details the minor differences among use with other libraries. The <a href='#examples'>Examples</a> section has other awesome examples of how you can put CanJS to good use. There is also an <a href='http://ci.javascriptmvc.com/jobs/can/test/test.html'>online test suite</a>.</p>

<h2 id='canconstruct_'>can.Construct <code>can.Construct( [classProperties,] [prototypeProperties] )</code></h2>

<p>Constructor functions made with <a href='http://donejs.com/docs.html#!can.Construct'>can.Construct</a> are used to create objects with shared properties. It&#8217;s used by both <strong>can.Control</strong> and <strong>can.Model</strong>.</p>

<p>To create a constructor function of your own, call <strong>can.Construct</strong> with the:</p>

<ul>
<li><strong>classProperties</strong> that are attached directly to the constructor, and</li>

<li>instance <strong>prototypeProperties</strong>.</li>
</ul>

<p><strong>can.Construct</strong> sets up the prototype chain so subclasses can be further extended and sub-classed as far as you like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Construct</span><span class='p'>({</span>
  <span class='nx'>init</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(){},</span>
  
  <span class='nx'>author</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span> <span class='p'>...</span> <span class='p'>},</span>
  
  <span class='nx'>coordinates</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span> <span class='p'>...</span> <span class='p'>},</span>
  
  <span class='nx'>allowedToEdit</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>account</span> <span class='p'>)</span> <span class='p'>{</span> 
    <span class='k'>return</span> <span class='kc'>true</span><span class='p'>;</span>
  <span class='p'>}</span>
<span class='p'>});</span>
  
<span class='kd'>var</span> <span class='nx'>PrivateTodo</span> <span class='o'>=</span> <span class='nx'>Todo</span><span class='p'>({</span>
  <span class='nx'>allowedToEdit</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>account</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>return</span> <span class='nx'>account</span><span class='p'>.</span><span class='nx'>owns</span><span class='p'>(</span> <span class='k'>this</span> <span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>});</span>
</code></pre>
</div>
<p>If only one set of properties is passed to <strong>can.Construct</strong>, it&#8217;s assumed to be the prototype properties.</p>

<h3 id='init_'>init <code>new can.Construct( [args ...] )</code></h3>

<p>When a constructor is called with the <code>new</code> keyword, <strong>can.Construct</strong> creates the instance and calls <a href='http://donejs.com/docs.html#!can.Construct.prototype.init'>can.Construct.prototype.init</a> with the arguments passed to <code>new Constructor(...)</code>.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Construct</span><span class='p'>({</span>
  <span class='nx'>init</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>text</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>text</span> <span class='o'>=</span> <span class='nx'>text</span>
  <span class='p'>},</span>
  <span class='nx'>read</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>text</span> <span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>})</span>
  
<span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='s1'>&#39;Hello World&#39;</span> <span class='p'>);</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>read</span><span class='p'>()</span>
</code></pre>
</div>
<h2 id='canobserve_'>can.Observe <code>new can.Observe( data )</code></h2>

<p><a href='http://donejs.com/docs.html#!can.Observe'>can.Observe</a> provides the observable pattern for JavaScript Objects. It lets you:</p>

<ul>
<li>Set and remove property values on objects.</li>

<li>Listen for property changes.</li>

<li>Work with nested properties.</li>
</ul>

<p>To create an observable object, use <code>new can.Observe( [data] )</code> like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>paginate</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Observe</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>offset</span><span class='o'>:</span> <span class='mi'>0</span><span class='p'>,</span> <span class='nx'>limit</span><span class='o'>:</span> <span class='mi'>100</span><span class='p'>,</span> <span class='nx'>count</span><span class='o'>:</span> <span class='mi'>2000</span> <span class='p'>}</span> <span class='p'>)</span>
</code></pre>
</div>
<p>To create an observable array, use <code>new can.Observe.List( [array] )</code> like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>hobbies</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Observe</span><span class='p'>.</span><span class='nx'>List</span><span class='p'>(</span> <span class='p'>[</span><span class='s1'>&#39;programming&#39;</span><span class='p'>,</span> 
                             <span class='s1'>&#39;basketball&#39;</span><span class='p'>,</span> 
                             <span class='s1'>&#39;party rocking&#39;</span><span class='p'>]</span> <span class='p'>)</span>
</code></pre>
</div>
<p><strong>can.Observe</strong> is used by both <a href='#can_model'>can.Model</a> and <a href='#can_route'>can.route</a>. However, observe is useful on its own to maintain client-side state (such as pagination data).</p>

<h3 id='attr_'>attr <code>observe.attr( [name,] [value] )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Observe.prototype.attr'>can.Observe.prototype.attr</a> reads or sets properties on an observe:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;offset&#39;</span> <span class='p'>)</span> <span class='c1'>//-&gt; 0</span>
  
<span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;offset&#39;</span><span class='p'>,</span> <span class='mi'>100</span> <span class='p'>);</span>
  
<span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>()</span> <span class='c1'>//-&gt; { offset: 100, limit: 100, count: 2000 }</span>
  
<span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>limit</span><span class='o'>:</span> <span class='mi'>200</span><span class='p'>,</span> <span class='nx'>count</span><span class='o'>:</span> <span class='mi'>1000</span> <span class='p'>}</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='removeattr_'>removeAttr <code>observe.removeAttr( name )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Observe.prototype.removeAttr'>can.Observe.prototype.removeAttr</a> removes a property by name from an observe. This is similar to using the <code>delete</code> keyword to remove a property.</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>o</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Observe</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>foo</span><span class='o'>:</span> <span class='s1'>&#39;bar&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
<span class='nx'>o</span><span class='p'>.</span><span class='nx'>removeAttr</span><span class='p'>(</span> <span class='s1'>&#39;foo&#39;</span> <span class='p'>);</span> <span class='c1'>//-&gt; &#39;bar&#39;</span>
</code></pre>
</div>
<h3 id='bind_'>bind <code>observe.bind( eventType, handler(args...) )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Observe.prototype.bind'>can.Observe.prototype.bind</a> listens to changes on a <strong>can.Observe</strong>. There are two types of events triggered as a result of an attribute change:</p>

<ul>
<li><code>change</code> events - a generic event so you can listen to any property change and how it was changed</li>

<li><code>ATTR_NAME</code> events - bind to specific attribute changes</li>
</ul>

<p>The following listens to all attribute changes and &#8216;offset&#8217; changes on the paginate instance:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;change&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>attr</span><span class='p'>,</span> <span class='nx'>how</span><span class='p'>,</span> <span class='nx'>newVal</span><span class='p'>,</span> <span class='nx'>oldVal</span> <span class='p'>)</span> <span class='p'>{</span>
   <span class='c1'>// attr = &#39;offset&#39;</span>
   <span class='c1'>// how = &#39;set&#39;</span>
   <span class='c1'>// newVal = 200</span>
   <span class='c1'>// oldVal = 100</span>
<span class='p'>}).</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;offset&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>newVal</span><span class='p'>,</span> <span class='nx'>oldVal</span> <span class='p'>)</span> <span class='p'>{</span>
   <span class='c1'>// newVal = 200</span>
   <span class='c1'>// oldVal = 100</span>
<span class='p'>})</span>
<span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;offset&#39;</span><span class='p'>,</span> <span class='mi'>200</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='unbind_'>unbind <code>observe.unbind( eventType, handler )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Observe.prototype.unbind'>can.Observe.prototype.unbind</a> stops listening to an event. The same function that was used for the handler in <code>bind</code> must be passed to <code>unbind</code>.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>countHandler</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>newVal</span><span class='p'>,</span> <span class='nx'>oldVal</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;the count has changed&#39;</span> <span class='p'>);</span>
<span class='p'>}</span>
<span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;count&#39;</span><span class='p'>,</span> <span class='nx'>countHandler</span> <span class='p'>);</span>
<span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;count&#39;</span><span class='p'>,</span> <span class='mi'>3000</span> <span class='p'>);</span>
<span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>unbind</span><span class='p'>(</span> <span class='s1'>&#39;count&#39;</span><span class='p'>,</span> <span class='nx'>countHandler</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='each_'>each <code>observe.each( handler(attrName, value) )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Observe.prototype.each'>can.Observe.prototype.each</a> iterates through each attribute, calling handler with each attribute name and value.</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>paginate</span><span class='p'>.</span><span class='nx'>each</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>name</span><span class='p'>,</span> <span class='nx'>value</span> <span class='p'>)</span> <span class='p'>{</span>
   <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='nx'>name</span><span class='p'>,</span> <span class='nx'>value</span> <span class='p'>);</span>
<span class='p'>})</span>
<span class='c1'>// writes:</span>
<span class='c1'>//  offset 200</span>
<span class='c1'>//  limit 200</span>
<span class='c1'>//  count 1000</span>
</code></pre>
</div>
<h3 id='canobservelist_'>can.Observe.List <code>new can.Observe.List( [array] )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Observe.List'>can.Observe.List</a> inherits from <strong>can.Observe</strong> but adds list specific methods such as:</p>

<ul>
<li><a href='http://donejs.com/docs.html#!can.Observe.List.prototype.indexOf'>indexOf</a> <code>list.indexOf( item )</code> - Returns the position of the item in the list.</li>

<li><a href='http://donejs.com/docs.html#!can.Observe.List.prototype.pop'>pop</a> <code>list.pop()</code> - removes the last item in the list.</li>

<li><a href='http://donejs.com/docs.html#!can.Observe.List.prototype.push'>push</a> <code>list.push( items... )</code> - adds items to the end of the list.</li>

<li><a href='http://donejs.com/docs.html#!can.Observe.List.prototype.shift'>shift</a> <code>list.shift()</code> - removes the first item in the list.</li>

<li><a href='http://donejs.com/docs.html#!can.Observe.List.prototype.splice'>splice</a> <code>list.splice( index, howMany, [ items... ] )</code> - removes and inserts items at the specified index.</li>

<li><a href='http://donejs.com/docs.html#!can.Observe.List.prototype.unshift'>unshift</a> <code>list.unshift( items... )</code> - adds items to the start of the list.</li>
</ul>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>hobbies</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Observe</span><span class='p'>.</span><span class='nx'>List</span><span class='p'>(</span> <span class='p'>[</span> <span class='s1'>&#39;programming&#39;</span><span class='p'>,</span> 
                               <span class='s1'>&#39;basketball&#39;</span><span class='p'>,</span> 
                               <span class='s1'>&#39;party rocking&#39;</span> <span class='p'>]</span> <span class='p'>)</span>
                               
<span class='c1'>// listen to changes in the list</span>
<span class='nx'>hobbies</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;add&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>newVals</span><span class='p'>,</span> <span class='nx'>index</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;added&#39;</span><span class='p'>,</span> <span class='nx'>newVals</span><span class='p'>,</span> <span class='s1'>&#39;at&#39;</span><span class='p'>,</span> <span class='nx'>index</span> <span class='p'>);</span>
<span class='p'>}).</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;remove&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>oldVals</span><span class='p'>,</span> <span class='nx'>index</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;removed&#39;</span><span class='p'>,</span> <span class='nx'>oldVals</span><span class='p'>,</span> <span class='s1'>&#39;at&#39;</span><span class='p'>,</span> <span class='nx'>index</span> <span class='p'>);</span>
<span class='p'>})</span>

<span class='c1'>// modify the list</span>
<span class='nx'>hobbies</span><span class='p'>.</span><span class='nx'>pop</span><span class='p'>()</span>
<span class='nx'>hobbies</span><span class='p'>.</span><span class='nx'>unshift</span><span class='p'>(</span> <span class='s1'>&#39;rocking parties&#39;</span> <span class='p'>)</span>
</code></pre>
</div>
<h2 id='canmodel_'>can.Model <code>can.Model( [classProperties,] [prototypeProperties] )</code></h2>

<p><a href='http://donejs.com/docs.html#!can.Model'>can.Model</a> is a <a href='#can_observe'>can.Observe</a> that connects to a RESTful interface.</p>

<p>Extend <a href='http://donejs.com/docs.html#!can.Model'>can.Model</a> with your domain specific methods and can.Model provides a set of methods for managing changes.</p>

<p>To create a <strong>Model</strong> class, call <strong>can.Model</strong> with:</p>

<ul>
<li><strong>classProperties</strong>, including <a href='http://donejs.com/docs.html#!can.Model.static.findAll'>findAll</a>, <a href='http://donejs.com/docs.html#!can.Model.static.findOne'>findOne</a>, <a href='http://donejs.com/docs.html#!can.Model.static.create'>create</a>, <a href='http://donejs.com/docs.html#!can.Model.static.update'>update</a>, <a href='http://donejs.com/docs.html#!can.Model.static.destroy'>destroy</a> properties, and</li>

<li>any <strong>prototypeProperties</strong> helper methods.</li>
</ul>

<p>Make a Todo model in <strong>todos.js</strong> like the following:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
  <span class='nx'>findAll</span> <span class='o'>:</span> <span class='s1'>&#39;GET /todos&#39;</span><span class='p'>,</span>
  <span class='nx'>findOne</span> <span class='o'>:</span> <span class='s1'>&#39;GET /todos/{id}&#39;</span><span class='p'>,</span>
  <span class='nx'>create</span>  <span class='o'>:</span> <span class='s1'>&#39;POST /todos&#39;</span><span class='p'>,</span>
  <span class='nx'>update</span>  <span class='o'>:</span> <span class='s1'>&#39;PUT /todos/{id}&#39;</span><span class='p'>,</span>
  <span class='nx'>destroy</span> <span class='o'>:</span> <span class='s1'>&#39;DELETE /todos/{id}&#39;</span>
<span class='p'>},</span> <span class='p'>{})</span>
</code></pre>
</div>
<h3 id='init_'>init <code>new can.Model(attributes)</code></h3>

<p>Create a todo instance like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;do the dishes&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='attr_'>attr <code>model.attr( name, [value] )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Model.prototype.attr'>can.Model.prototype.attr</a> reads or sets properties on model instances. It works the same way as <a href='#can_observe-attr'>can.Observe.prototype.attr</a>.</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>todo</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;do the dishes&#39;</span>

<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span><span class='p'>,</span> <span class='s1'>&#39;wash the dishes&#39;</span> <span class='p'>);</span>

<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>()</span> <span class='c1'>//-&gt; { name: &#39;wash the dishes&#39; }</span>

<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;did the dishes&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='talking_to_the_server'>Talking to the server</h3>

<p>Model uses static <a href='http://donejs.com/docs.html#!can.Model.static.findAll'>findAll</a>, <a href='http://donejs.com/docs.html#!can.Model.static.findOne'>findOne</a>, <a href='http://donejs.com/docs.html#!can.Model.static.create'>create</a>, <a href='http://donejs.com/docs.html#!can.Model.static.update'>update</a>, and <a href='http://donejs.com/docs.html#!can.Model.static.destroy'>destroy</a> methods to create, read, update and delete (CRUD) model data on the server.</p>

<p>By filling these functions out, you are able to call <strong>findAll</strong> and <strong>findOne</strong> on the model to retrieve model instances and <strong>save</strong> and <strong>destroy</strong> on instances.</p>

<h3 id='findall_'>findAll <code>findAll( params, success( models ), error() ) -&gt; Deferred</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Model.static.findAll'>can.Model.findAll</a> retrieves multiple instances from the server:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='nx'>todos</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>].</span><span class='nx'>name</span> <span class='p'>);</span>
<span class='p'>})</span> <span class='c1'>//-&gt; Deferred</span>
</code></pre>
</div>
<p>This makes a request to <code>GET /todos</code> which should return JSON like:</p>
<div class='highlight'><pre><code class='javascript'><span class='p'>[{</span>
  <span class='s2'>&quot;id&quot;</span> <span class='o'>:</span> <span class='mi'>1</span><span class='p'>,</span>
  <span class='s2'>&quot;name&quot;</span> <span class='o'>:</span> <span class='s2'>&quot;do the dishes&quot;</span>
<span class='p'>},{</span>
  <span class='s2'>&quot;id&quot;</span> <span class='o'>:</span> <span class='mi'>2</span><span class='p'>,</span>
  <span class='s2'>&quot;name&quot;</span> <span class='o'>:</span> <span class='s2'>&quot;mow the lawn&quot;</span>
<span class='p'>},{</span>
  <span class='s2'>&quot;id&quot;</span> <span class='o'>:</span> <span class='mi'>3</span><span class='p'>,</span>
  <span class='s2'>&quot;name&quot;</span> <span class='o'>:</span> <span class='s2'>&quot;iron my shirts&quot;</span>
<span class='p'>}]</span>
</code></pre>
</div>
<p>The <strong>todos</strong> parameter is a <a href='#can_model-can_model_list'>can.Model.List</a> of todo instances. <code>Todo.findAll</code> returns a <a href='#utilities-deferred'>deferred</a> that resolves to the <strong>todos</strong> list.</p>

<h3 id='findone_'>findOne <code>findOne( params, success( model ), error() ) -&gt; Deferred</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Model.static.findOne'>findOne</a> retrieves a single model instance:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findOne</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>id</span><span class='o'>:</span> <span class='mi'>1</span> <span class='p'>},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>name</span> <span class='p'>);</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>This makes a request to <code>GET /todos/{id}</code> which should return JSON like:</p>
<div class='highlight'><pre><code class='javascript'><span class='p'>{</span>
  <span class='s2'>&quot;id&quot;</span> <span class='o'>:</span> <span class='mi'>1</span><span class='p'>,</span>
  <span class='s2'>&quot;name&quot;</span> <span class='o'>:</span> <span class='s2'>&quot;do the dishes&quot;</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>The <strong>todo</strong> parameter is model instance. <code>Todo.findOne</code> returns a <a href='#utilities-deferred'>deferred</a> that resolves to the <strong>todo</strong> instance.</p>

<h3 id='save_'>save <code>todo.save( success( todo ), error() ) -&gt; Deferred</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Model.prototype.save'>can.Model.prototype.save</a> <strong>creates</strong> or <strong>updates</strong> instances depending if the instance has already been created or not.</p>

<p>To <strong>create</strong> a todo on the server, create a todo instance and call <strong>save</strong> like the following:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>({</span><span class='nx'>name</span><span class='o'>:</span> <span class='s2'>&quot;mow lawn&quot;</span><span class='p'>})</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>save</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>);</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>This makes a request to <code>PUT /todos</code> with <code>name=mow lawn</code> and should get a response with the <strong>id</strong> like:</p>
<div class='highlight'><pre><code class='javascript'><span class='p'>{</span> <span class='s2'>&quot;id&quot;</span> <span class='o'>:</span> <span class='mi'>5</span> <span class='p'>}</span>
</code></pre>
</div>
<p><strong>save</strong> calls back with the original todo instance and returns a <a href='#utilities-deferred'>deferred</a> that resolves with the todo after it has been created on the server.</p>

<p>To <strong>update</strong> a todo on the server, change the attributes and call <strong>save</strong> again like the following:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;mow lawn&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>save</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;created&#39;</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>);</span>
  
  <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span><span class='p'>,</span> <span class='s1'>&#39;mow my lawn&#39;</span> <span class='p'>)</span>
  <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>save</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;updated&#39;</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>);</span>
  <span class='p'>})</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>This makes a request to <code>POST /todos/5</code> with <code>name=mow my lawn</code> and only needs to get a successful response.</p>

<h3 id='destroy_'>destroy <code>todo.destroy( success( todo ), error() ) -&gt; Deferred</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Model.prototype.destroy'>can.Model.prototype.destroy</a> deletes a record on the server. You can do this like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;mow lawn&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>save</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;created&#39;</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>);</span>
  
  <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>destroy</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;destroyed&#39;</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>);</span>
  <span class='p'>})</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>This makes a request to <code>DELETE /todos/5</code> and only needs a successful response. Like <strong>save</strong>, the callback&#8217;s <code>todo</code> parameter is the destroyed instance and a <a href='#utilities-deferred'>deferred</a> is returned that resolves with the <code>todo</code> after it has been destroyed by the server.</p>

<h3 id='bind_'>bind <code>model.bind( event, handler( ev, model ) ) -&gt; model</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Model.prototype.bind'>can.Model.prototype.bind</a> listens to changes in a model instance&#8217;s attributes in the same way as <a href='#can_observe-bind'>Observe&#8217;s bind</a>. For example:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>todo</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>newVal</span><span class='p'>,</span> <span class='nx'>oldVal</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;name changed to&#39;</span><span class='p'>,</span> <span class='nx'>newVal</span> <span class='p'>);</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>In addition to Observe&#8217;s events, Model also supports three new events:</p>

<ul>
<li><strong>created</strong> - an instance is created on the server</li>

<li><strong>updated</strong> - an instance is updated on the server</li>

<li><strong>destroyed</strong> - an instance is destroyed on the server</li>
</ul>

<p>For example, listen for when an instance is <strong>created</strong> on the server like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;mow lawn&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;created&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;created&#39;</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>);</span>
<span class='p'>})</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>save</span><span class='p'>()</span>
</code></pre>
</div>
<p><a href='http://donejs.com/docs.html#!can.Model.static.bind'>can.Model.bind</a> lets you listen for anytime <strong>any</strong> instance is <strong>created</strong>, <strong>updated</strong>, or <strong>destroyed</strong>:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;created&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>){</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;created&#39;</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>);</span>
<span class='p'>})</span>
</code></pre>
</div>
<h3 id='canmodellist_'>can.Model.List <code>new can.Model.List( items )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Model.List'>can.Model.List</a> is a <a href='#can_observe-can_observe_list'>can.Observe.List</a> that automatically removes items when they are destroyed. <strong>Model.Lists</strong> are returned by <a href='#can_model-findall'>findAll</a>.</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>

  <span class='c1'>// listen for when a todo is removed</span>
  <span class='nx'>todos</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;remove&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>removed</span><span class='p'>,</span> <span class='nx'>index</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;removed&#39;</span><span class='p'>,</span> <span class='nx'>removed</span><span class='p'>.</span><span class='nx'>length</span><span class='p'>,</span> <span class='s1'>&#39;todos&#39;</span> <span class='p'>);</span>
  <span class='p'>})</span>
  
  <span class='c1'>// destroy the first todo</span>
  <span class='nx'>todos</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>].</span><span class='nx'>destroy</span><span class='p'>()</span>
<span class='p'>})</span>
</code></pre>
</div>
<h2 id='canview_'>can.view <code>can.view( idOrUrl, data ) -&gt; documentFragment</code></h2>

<p><a href='http://donejs.com/docs.html#!can.view'>can.view</a> is used to load, render, and create HTMLElements from JavaScript templates. Pass it &#8230;</p>

<ul>
<li>the <strong>id</strong> or <strong>URL</strong> of a script tag to use as the content of the template</li>

<li><strong>data</strong> to pass to the template</li>
</ul>

<p>It returns the rendered result of the template as a documentFragment (a documentFragment is a lightweight container that can hold DOM elements in it).</p>
<div class='highlight'><pre><code class='javascript'><span class='nb'>document</span><span class='p'>.</span><span class='nx'>getElementById</span><span class='p'>(</span> <span class='s1'>&#39;todos&#39;</span> <span class='p'>)</span>
  <span class='p'>.</span><span class='nx'>appendChild</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todos.ejs&#39;</span><span class='p'>,</span> <span class='p'>[</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;mow lawn&#39;</span> <span class='p'>}</span> <span class='p'>]</span> <span class='p'>)</span> <span class='p'>)</span>
</code></pre>
</div>
<p><code>can.view</code> supports multiple templating languages; however, <a href='#can_ejs'>can.EJS</a> is packaged with CanJS and supports live-binding of <a href='#can_observe'>can.Observe</a>.</p>

<h3 id='loading_templates'>Loading Templates</h3>

<p><code>can.view</code> loads templates from a URL or a script tag. To load from a <strong>script</strong> tag, create a script tag with the template contents, an id, and a type attribute that specifies the template type (text/ejs).</p>

<p>For example, add the following <strong>html</strong>:</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;script type=&quot;text/ejs&quot; id=&quot;todosEJS&quot;&gt;</span>
<span class='x'>  </span><span class='cp'>&lt;%</span> <span class='k'>for</span><span class='p'>(</span> <span class='n'>var</span> <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span> <span class='n'>i</span> <span class='o'>&lt;</span> <span class='n'>this</span><span class='o'>.</span><span class='n'>length</span><span class='p'>;</span> <span class='n'>i</span><span class='o'>++</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>    &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>this</span><span class='o'>[</span> <span class='n'>i</span> <span class='o'>].</span><span class='n'>name</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='x'>  </span><span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>Render this template and insert it into the page:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
   <span class='nb'>document</span><span class='p'>.</span><span class='nx'>getElementById</span><span class='p'>(</span> <span class='s1'>&#39;todos&#39;</span> <span class='p'>)</span>
           <span class='p'>.</span><span class='nx'>appendChild</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todosEJS&#39;</span><span class='p'>,</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>);</span>
<span class='p'>}</span> <span class='p'>);</span>
</code></pre>
</div>
<p>To load from a <strong>URL</strong>, create a <em>todos/todos.ejs</em> file that contains:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='k'>for</span><span class='p'>(</span> <span class='n'>var</span> <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span> <span class='n'>i</span> <span class='o'>&lt;</span> <span class='n'>this</span><span class='o'>.</span><span class='n'>length</span><span class='p'>;</span> <span class='n'>i</span><span class='o'>++</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>this</span><span class='o'>[</span> <span class='n'>i</span> <span class='o'>].</span><span class='n'>name</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<p>Render this with:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nb'>document</span><span class='p'>.</span><span class='nx'>getElementById</span><span class='p'>(</span> <span class='s1'>&#39;todos&#39;</span> <span class='p'>)</span>
           <span class='p'>.</span><span class='nx'>appendChild</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todos/todos.ejs&#39;</span><span class='p'>,</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>);</span>
<span class='p'>}</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='deferreds'>Deferreds</h3>

<p><strong>can.view</strong> accepts <a href='#utilities-deferred'>deferreds</a>. If the <code>data</code> argument is a deferred or an object that contains deferreds, <strong>can.view</strong> returns a deferred that resolves to the documentFragment after all deferreds have resolved and the template has loaded.</p>

<p><a href='#can_model-findall'>can.Model.findAll</a> returns deferreds. This means that the following loads <code>todos/todos.ejs</code>, <code>Todo.findAll</code> and <code>User.findOne</code> in parallel and resolves the returned deferred with the documentFragment when they are all done:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todos/todos.ejs&#39;</span><span class='p'>,</span> <span class='p'>{</span>
  <span class='nx'>todos</span><span class='o'>:</span> <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(),</span>
  <span class='nx'>user</span><span class='o'>:</span> <span class='nx'>User</span><span class='p'>.</span><span class='nx'>findOne</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>id</span><span class='o'>:</span> <span class='mi'>5</span> <span class='p'>}</span> <span class='p'>)</span>
<span class='p'>}</span> <span class='p'>).</span><span class='nx'>then</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>frag</span> <span class='p'>){</span>
  <span class='nb'>document</span><span class='p'>.</span><span class='nx'>getElementById</span><span class='p'>(</span> <span class='s1'>&#39;todos&#39;</span> <span class='p'>)</span>
          <span class='p'>.</span><span class='nx'>appendChild</span><span class='p'>(</span> <span class='nx'>frag</span> <span class='p'>);</span>
<span class='p'>})</span>
</code></pre>
</div>
<h3 id='render_'>render <code>can.view.render( idOrUrl, data )</code></h3>

<p>To render a string instead of a documentFragment, use can.view.render like:</p>
<div class='highlight'><pre><code class='javascript'><span class='o'>&lt;%</span> <span class='k'>for</span><span class='p'>(</span> <span class='kd'>var</span> <span class='nx'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span> <span class='nx'>i</span> <span class='o'>&lt;</span> <span class='nx'>todos</span><span class='p'>.</span><span class='nx'>length</span><span class='p'>;</span> <span class='nx'>i</span><span class='o'>++</span> <span class='p'>)</span> <span class='p'>{</span> <span class='o'>%&gt;</span>
  <span class='o'>&lt;</span><span class='nx'>li</span><span class='o'>&gt;&lt;%==</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>.</span><span class='nx'>render</span><span class='p'>(</span> <span class='s1'>&#39;/todos/todo.ejs&#39;</span><span class='p'>,</span> <span class='p'>{</span>
             <span class='nx'>todo</span><span class='o'>:</span> <span class='nx'>todo</span><span class='p'>[</span> <span class='nx'>i</span> <span class='p'>]</span>
            <span class='p'>}</span> <span class='p'>)</span> <span class='o'>%&gt;</span>
  <span class='o'>&lt;</span><span class='err'>/li&gt;</span>
<span class='o'>&lt;%</span> <span class='p'>}</span> <span class='o'>%&gt;</span>
</code></pre>
</div>
<h2 id='canejs_'>can.EJS <code>new can.EJS( options )</code></h2>

<p><a href='http://donejs.com/docs.html#!can.EJS'>can.EJS</a> is CanJS&#8217;s default template language and used with <a href='#!can_view'>can.view</a>. It provides live binding when used with <a href='#can_observe'>can.Observes</a>. A <strong>can.EJS</strong> template looks like the HTML you want, but with <strong>magic tags</strong> where you want dynamic behavior. The following lists todo elements:</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;script type=&quot;text/ejs&quot; id=&quot;todosEJS&quot;&gt;</span>
<span class='cp'>&lt;%</span> <span class='k'>for</span><span class='p'>(</span> <span class='n'>var</span> <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span> <span class='n'>i</span> <span class='o'>&lt;</span> <span class='n'>this</span><span class='o'>.</span><span class='n'>length</span><span class='p'>;</span> <span class='n'>i</span><span class='o'>++</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>this</span><span class='o'>[</span> <span class='n'>i</span> <span class='o'>].</span><span class='n'>name</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>Use <strong>can.view</strong> to render this template:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nb'>document</span><span class='p'>.</span><span class='nx'>getElementById</span><span class='p'>(</span> <span class='s1'>&#39;todos&#39;</span> <span class='p'>)</span>
          <span class='p'>.</span><span class='nx'>appendChild</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todosEJS&#39;</span><span class='p'>,</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>)</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>Notice that <code>this</code> in the template is the list of todos. The <code>data</code> argument passed <strong>can.view</strong> becomes <code>this</code> in EJS. EJS can also access any properties of <code>this</code> directly (without writing <code>this.PROPERTY</code> all the time). For example, a template that lists the user&#8217;s name and todos:</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;script type=&quot;text/ejs&quot; id=&quot;todosEJS&quot;&gt;</span>
<span class='x'>&lt;h2&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>user</span><span class='o'>.</span><span class='n'>name</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/h2&gt;</span>
<span class='cp'>&lt;%</span> <span class='k'>for</span><span class='p'>(</span> <span class='n'>var</span> <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span> <span class='n'>i</span> <span class='o'>&lt;</span> <span class='n'>todos</span><span class='o'>.</span><span class='n'>length</span><span class='p'>;</span> <span class='n'>i</span><span class='o'>++</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>todos</span><span class='o'>[</span> <span class='n'>i</span> <span class='o'>].</span><span class='n'>name</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>Can be inserted into the document with:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todosEJS&#39;</span><span class='p'>,</span> <span class='p'>{</span>
  <span class='nx'>todos</span> <span class='o'>:</span> <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(),</span>
  <span class='nx'>user</span><span class='o'>:</span> <span class='nx'>User</span><span class='p'>.</span><span class='nx'>findOne</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>id</span><span class='o'>:</span> <span class='mi'>5</span> <span class='p'>}</span> <span class='p'>)</span>
<span class='p'>}).</span><span class='nx'>then</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>frag</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nb'>document</span><span class='p'>.</span><span class='nx'>getElementById</span><span class='p'>(</span> <span class='s1'>&#39;todos&#39;</span> <span class='p'>)</span>
          <span class='p'>.</span><span class='nx'>appendChild</span><span class='p'>(</span> <span class='nx'>frag</span> <span class='p'>);</span>
<span class='p'>})</span>
</code></pre>
</div>
<h3 id='magic_tags'>Magic Tags</h3>

<p>EJS uses 5 types of magic tags:</p>

<p><strong><code>&lt;% CODE %&gt;</code></strong> - Runs JS Code.</p>

<p>This type of magic tag does not modify the template but is used for JS control statements like for-loops, if/else, switch, declaring variables, etc. Pretty much any JS code is valid. Examples:</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;!-- check if there are no todos --&gt;</span>
<span class='cp'>&lt;%</span> <span class='k'>if</span> <span class='p'>(</span> <span class='n'>todos</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;length&#39;</span> <span class='p'>)</span> <span class='o'>===</span> <span class='mi'>0</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>    &lt;li&gt;You have no todos&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='k'>else</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>    </span><span class='cp'>&lt;%</span> <span class='n'>list</span><span class='p'>(</span> <span class='n'>todos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>()</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>        &lt;li&gt; .... &lt;/li&gt;</span>
<span class='x'>    </span><span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x' />

<span class='x'>&lt;!-- create and use a variable --&gt;</span>
<span class='cp'>&lt;%</span> <span class='n'>var</span> <span class='n'>person</span> <span class='o'>=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;person&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>&lt;span&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>person</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&lt;span&gt;</span>
</code></pre>
</div>
<p><strong><code>&lt;%= CODE %&gt;</code></strong> - Runs a JS statement and writes the <strong>escaped</strong> result into the result of the template.</p>

<p>The following results in the user seeing <code>my favorite element is &amp;lt;b&gt;B&amp;lt;b&gt;.</code> and not <code>my favorite element is <B>B</B>.</code>.</p>

<pre><code> &lt;div&gt;my favorite element is &lt;%= &#39;&lt;b&gt;B&lt;/b&gt;&#39; %&gt;.&lt;/div&gt;</code></pre>

<p>This protects you against <a href='http://en.wikipedia.org/wiki/Cross-site_scripting'>cross-site scripting</a> attacks.</p>

<p><strong><code>&lt;%== CODE %&gt;</code></strong> - Runs a JS statement and writes the <strong>unescaped</strong> result into the result of the template.</p>

<p>The following results in <code>my favorite element is <B>B</B>.</code>. Using <code>&lt;%==</code> is useful for sub-templates.</p>

<pre><code>&lt;div&gt;my favorite element is &lt;%== &#39;&lt;B&gt;B&lt;/B&gt;&#39; %&gt;.&lt;/div&gt;</code></pre>

<p>Use <code>&lt;%== CODE %&gt;</code> when rendering subtemplates:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='k'>for</span><span class='p'>(</span> <span class='n'>var</span> <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span> <span class='n'>i</span> <span class='o'>&lt;</span> <span class='n'>todos</span><span class='o'>.</span><span class='n'>length</span><span class='p'>;</span> <span class='n'>i</span><span class='o'>++</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span><span class='o'>=</span> <span class='n'>can</span><span class='o'>.</span><span class='n'>view</span><span class='o'>.</span><span class='n'>render</span><span class='p'>(</span> <span class='s1'>&#39;todoEJS&#39;</span><span class='p'>,</span> <span class='n'>todos</span><span class='o'>[</span> <span class='n'>i</span> <span class='o'>]</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<h3 id='live_binding'>Live Binding</h3>

<p><strong>can.EJS</strong> will automatically update itself when <a href='#can_observe'>can.Observes</a> change. To enable live-binding, use <a href='#!can_observe-attr'>attr</a> to read properties. For example, the following template will update todo&#8217;s name when it change:</p>
<div class='highlight'><pre><code class='erb'><span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
</code></pre>
</div>
<p>Notice <code>attr( &#39;name&#39; )</code>. This sets up live-binding. If you change the todo&#8217;s name, the <code>&lt;li&gt;</code> will automatically be updated:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>todo</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Clean the toilet&#39;</span> <span class='p'>);</span>
</code></pre>
</div>
<p>Live-binding works by wrapping the code inside the magic tags with a function to call when the attribute (or attributes) are changed. This is important to understand because a template like this will not work:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='k'>for</span><span class='p'>(</span> <span class='n'>var</span> <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span> <span class='n'>i</span> <span class='o'>&lt;</span> <span class='n'>todos</span><span class='o'>.</span><span class='n'>length</span><span class='p'>;</span> <span class='n'>i</span><span class='o'>++</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>todos</span><span class='o'>[</span> <span class='n'>i</span> <span class='o'>].</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<p>This does not work because when the function wrapping <code>todos[ i ].attr( &#39;name&#39; )</code> is called, <code>i</code> will be <strong>3</strong>, which is the index of the last todo, not the index of the desired todo. Fix this by using a closure like:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='vg'>$.</span><span class='n'>each</span><span class='p'>(</span> <span class='n'>todos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>i</span><span class='p'>,</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<h3 id='list_'>list <code>list( observeList, iterator( item, index ) )</code></h3>

<p>If you want to make the previous template update when todos are added or removed, you could bind to length like:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='n'>todos</span><span class='o'>.</span><span class='n'>bind</span><span class='p'>(</span> <span class='s1'>&#39;length&#39;</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>()</span> <span class='p'>{}</span> <span class='p'>);</span>
   <span class='vg'>$.</span><span class='n'>each</span><span class='p'>(</span> <span class='n'>todos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>i</span><span class='p'>,</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>      &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>})</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<p>Or simply use EJS&#8217;s <code>list</code> helper method like:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='n'>list</span><span class='p'>(</span> <span class='n'>todos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>})</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<p>Now when todos are added or removed from the todo list, the template&#8217;s HTML is updated:</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// add an item</span>
<span class='nx'>todos</span><span class='p'>.</span><span class='nx'>push</span><span class='p'>(</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;file taxes&#39;</span> <span class='p'>}</span> <span class='p'>)</span> <span class='p'>);</span>

<span class='c1'>// destroying an item removes it from Model.Lists</span>
<span class='nx'>todos</span><span class='p'>[</span> <span class='mi'>0</span> <span class='p'>].</span><span class='nx'>destroy</span><span class='p'>()</span>
</code></pre>
</div>
<h3 id='element_callbacks'>Element Callbacks</h3>

<p>If a function is returned by the <code>&lt;%= %&gt;</code> or <code>&lt;%== %&gt;</code> magic tags within an element&#8217;s tag like:</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;div </span><span class='cp'>&lt;%=</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>element</span> <span class='p'>)</span> <span class='p'>{</span> <span class='n'>element</span><span class='o'>.</span><span class='n'>style</span><span class='o'>.</span><span class='n'>display</span> <span class='o'>=</span> <span class='s1'>&#39;none&#39;</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x'> &gt;</span>
<span class='x'>  Hello</span>
<span class='x'>&lt;/div&gt;</span>
</code></pre>
</div>
<p>The function is called back with the <code>HTMLElement</code> as the first argument. This is useful to initialize functionality on an element within the view. This is so common that EJS supports <a href='http://wiki.ecmascript.org/doku.php?id=strawman:arrow_function_syntax'>ES5 arrow functions</a> that get passed the <code>NodeList</code> wrapped element. Using jQuery, this lets you write the above callback as:</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;div </span><span class='cp'>&lt;%=</span> <span class='p'>(</span><span class='n'>el</span><span class='p'>)</span> <span class='o'>-&gt;</span> <span class='n'>el</span><span class='o'>.</span><span class='n'>hide</span><span class='p'>()</span> <span class='cp'>%&gt;</span><span class='x'> &gt;</span>
<span class='x'>  Hello</span>
<span class='x'>&lt;/div&gt;</span>
</code></pre>
</div>
<p>This technique is commonly used to add data, especially model instances, to an element like:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='n'>list</span><span class='p'>(</span> <span class='n'>todos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li </span><span class='cp'>&lt;%=</span> <span class='p'>(</span><span class='n'>el</span><span class='p'>)</span> <span class='o'>-&gt;</span> <span class='n'>el</span><span class='o'>.</span><span class='n'>data</span><span class='p'>(</span> <span class='s1'>&#39;todo&#39;</span><span class='p'>,</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&gt;</span>
<span class='x'>    </span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<p>jQuery&#8217;s <code>el.data( NAME, data )</code> adds data to an element. If your library does not support this, can provides it as <code>can.data( NodeList, NAME, data )</code>. Rewrite the above example as:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='n'>list</span><span class='p'>(</span><span class='n'>todos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li </span><span class='cp'>&lt;%=</span> <span class='p'>(</span><span class='n'>el</span><span class='p'>)</span> <span class='o'>-&gt;</span> <span class='n'>can</span><span class='o'>.</span><span class='n'>data</span><span class='p'>(</span> <span class='n'>el</span><span class='p'>,</span> <span class='s1'>&#39;todo&#39;</span><span class='p'>,</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&gt;</span>
<span class='x'>    </span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<h2 id='cancontrol_'>can.Control <code>can.Control(classProps, prototypeProps)</code></h2>

<p><a href='http://donejs.com/docs.html#!can.Control'>can.Control</a> creates organized, memory-leak free, rapidly performing, stateful controls. Use it to create UI controls like tabs, grids, and context menus and organizes them into higher-order business rules with <a href='http://donejs.com/docs.html#!can.route'>can.route</a>. It can serve as a traditional view and a traditional controller.</p>

<p>The following examples make a basic todos widget that lists todos and lets us destroy them. Create a control constructor function of your own by extending <code>can.Control</code>.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='s1'>&#39;init&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>element</span> <span class='p'>,</span> <span class='nx'>options</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='kd'>var</span> <span class='nx'>self</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>;</span>
    <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='nx'>self</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todosEJS&#39;</span><span class='p'>,</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>)</span>
    <span class='p'>})</span>
  <span class='p'>}</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>Create an instance of the Todos on the <code>#todos</code> element with:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todosControl</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span><span class='p'>,</span> <span class='p'>{}</span> <span class='p'>);</span>
</code></pre>
</div>
<p><strong>todos.ejs</strong> looks like:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='n'>list</span><span class='p'>(</span> <span class='n'>todos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li </span><span class='cp'>&lt;%=</span> <span class='p'>(</span><span class='n'>el</span><span class='p'>)</span> <span class='o'>-&gt;</span> <span class='n'>el</span><span class='o'>.</span><span class='n'>data</span><span class='p'>(</span> <span class='s1'>&#39;todo&#39;</span><span class='p'>,</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'> &gt;</span>
<span class='x'>    </span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>    &lt;a href=&quot;javascript://&quot; class=&quot;destroy&quot;&gt;X&lt;/a&gt;</span>
<span class='x'>  &lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<h3 id='init_'>init <code>can.Control.prototype.init(element, options)</code></h3>

<p><code>init</code> is called when a new can.Control instance is created. It&#8217;s called with:</p>

<ul>
<li><strong>element</strong> - The wrapped element passed to the control. Control accepts a raw HTMLElement, a CSS selector, or a NodeList. This is set as <strong>this.element</strong> on the control instance.</li>

<li><strong>options</strong> - The second argument passed to new Control, extended with the can.Control&#8217;s static <strong>defaults</strong>. This is set as <strong>this.options</strong> on the control instance.</li>
</ul>

<p>and any other arguments passed to <code>new can.Control()</code>. For example:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='nx'>defaults</span><span class='o'>:</span> <span class='p'>{</span> <span class='nx'>view</span><span class='o'>:</span> <span class='s1'>&#39;todos.ejs&#39;</span> <span class='p'>}</span>
<span class='p'>},</span> <span class='p'>{</span>
  <span class='s1'>&#39;init&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>element</span> <span class='p'>,</span> <span class='nx'>options</span> <span class='p'>){</span>
    <span class='kd'>var</span> <span class='nx'>self</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>;</span>
    <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='nx'>self</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='nx'>self</span><span class='p'>.</span><span class='nx'>options</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>,</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>)</span>
    <span class='p'>});</span>
  <span class='p'>}</span>
<span class='p'>})</span>

<span class='c1'>// create a Todos with default options</span>
<span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='nb'>document</span><span class='p'>.</span><span class='nx'>body</span><span class='p'>.</span><span class='nx'>firstElementChild</span> <span class='p'>);</span>

<span class='c1'>// overwrite the template option</span>
<span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#todos&#39;</span><span class='p'>),</span> <span class='p'>{</span> <span class='nx'>view</span><span class='o'>:</span> <span class='s1'>&#39;specialTodos.ejs&#39;</span> <span class='p'>}</span> <span class='p'>)</span>
</code></pre>
</div>
<h3 id='element_'>element <code>this.element</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Controll.prototype.element'>this.element</a> is the NodeList of a single element, the element the control is created on.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todosControl</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='nb'>document</span><span class='p'>.</span><span class='nx'>body</span><span class='p'>.</span><span class='nx'>firstElementChild</span> <span class='p'>);</span>
<span class='nx'>todosControl</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>]</span> <span class='c1'>//-&gt; document.body.firstElementChild</span>
</code></pre>
</div>
<p>Each library wraps the element differently. If you are using jQuery, the element is wrapped with <code>jQuery( element )</code>.</p>

<h3 id='options_'>options <code>this.options</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Control.prototype.options'>this.options</a> is the second argument passed to <code>new can.Control()</code> and is merged with the control&#8217;s static <strong>defaults</strong> property.</p>

<h3 id='listening_to_events'>Listening to events</h3>

<p>Control automatically binds prototype methods that look like event handlers. Listening to <strong>click</strong>s on <code>&lt;li&gt;</code> elements looks like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='s1'>&#39;init&#39;</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>element</span> <span class='p'>,</span> <span class='nx'>options</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='kd'>var</span> <span class='nx'>self</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>;</span>
    <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='nx'>self</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span><span class='s1'>&#39;todosEJS&#39;</span><span class='p'>,</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>)</span>
    <span class='p'>});</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;li click&#39;</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>li</span><span class='p'>,</span> <span class='nx'>event</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;You clicked&#39;</span><span class='p'>,</span> <span class='nx'>li</span><span class='p'>.</span><span class='nx'>text</span><span class='p'>()</span> <span class='p'>)</span>
    
    <span class='c1'>// let other controls know what happened</span>
    <span class='nx'>li</span><span class='p'>.</span><span class='nx'>trigger</span><span class='p'>(</span> <span class='s1'>&#39;selected&#39;</span> <span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>When an <code>&lt;li&gt;</code> is clicked, <code>&#39;li click&#39;</code> is called with:</p>

<ul>
<li>The library-wrapped <strong>element</strong> that was clicked.</li>

<li>The <strong>event</strong> data</li>
</ul>

<p>Control uses event delegation, so you can add <code>&lt;li&gt;</code>s without needing to rebind event handlers.</p>

<p>To destroy a todo when it&#8217;s <code>&lt;a href=&quot;javascript://&quot; class=&quot;destroy&quot;&gt;</code> link is clicked:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='s1'>&#39;init&#39;</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>element</span> <span class='p'>,</span> <span class='nx'>options</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='kd'>var</span> <span class='nx'>self</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>;</span>
    <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='nx'>self</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todosEJS&#39;</span><span class='p'>,</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>)</span>
    <span class='p'>});</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;li click&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>li</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>li</span><span class='p'>.</span><span class='nx'>trigger</span><span class='p'>(</span> <span class='s1'>&#39;selected&#39;</span><span class='p'>,</span> <span class='nx'>li</span><span class='p'>.</span><span class='nx'>model</span><span class='p'>()</span> <span class='p'>);</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;li .destroy click&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>el</span><span class='p'>,</span> <span class='nx'>ev</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// get the li element that has todo data</span>
    <span class='kd'>var</span> <span class='nx'>li</span> <span class='o'>=</span> <span class='nx'>el</span><span class='p'>.</span><span class='nx'>closest</span><span class='p'>(</span> <span class='s1'>&#39;li&#39;</span> <span class='p'>);</span>
  
    <span class='c1'>// get the model</span>
    <span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='nx'>li</span><span class='p'>.</span><span class='nx'>data</span><span class='p'>(</span> <span class='s1'>&#39;todo&#39;</span> <span class='p'>)</span>
  
    <span class='c1'>// destroy it</span>
    <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>destroy</span><span class='p'>();</span>
  <span class='p'>}</span>
<span class='p'>})</span>
</code></pre>
</div>
<p>When the todo is destroyed, EJS&#8217;s live binding will remove its LI automatically.</p>

<h3 id='templated_event_handlers_pt_1_'>Templated Event Handlers Pt 1 <code>&quot;{optionName}&quot;</code></h3>

<p>Customize event handler behavior with <code>&quot;{NAME}&quot;</code> in the event handler name. The following allows customization of the event that destroys a todo:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>(</span> <span class='s1'>&#39;Todos&#39;</span><span class='p'>,</span> <span class='p'>{</span>
  <span class='s1'>&#39;init&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>element</span> <span class='p'>,</span> <span class='nx'>options</span> <span class='p'>)</span> <span class='p'>{</span> <span class='p'>...</span> <span class='p'>},</span>
  <span class='s1'>&#39;li click&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>li</span> <span class='p'>)</span> <span class='p'>{</span> <span class='p'>...</span> <span class='p'>},</span>
  
  <span class='s1'>&#39;li .destroy {destroyEvent}&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>el</span><span class='p'>,</span> <span class='nx'>ev</span> <span class='p'>)</span> <span class='p'>{</span> 
    <span class='c1'>// previous destroy code here</span>
  <span class='p'>}</span>
<span class='p'>})</span>

<span class='c1'>// create Todos with this.options.destroyEvent</span>
<span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span><span class='p'>,</span> <span class='p'>{</span> <span class='nx'>destroyEvent</span><span class='o'>:</span> <span class='s1'>&#39;mouseenter&#39;</span> <span class='p'>}</span> <span class='p'>)</span>
</code></pre>
</div>
<p>Values inside <code>{NAME}</code> are looked up on the control&#8217;s <code>this.options</code> and then, if not found, on the <code>window</code>. For example, we could customize it instead like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>(</span> <span class='s1'>&#39;Todos&#39;</span><span class='p'>,</span> <span class='p'>{</span>
  <span class='s1'>&#39;init&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>element</span> <span class='p'>,</span> <span class='nx'>options</span> <span class='p'>)</span> <span class='p'>{</span> <span class='p'>...</span> <span class='p'>},</span>
  <span class='s1'>&#39;li click&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>li</span> <span class='p'>)</span> <span class='p'>{</span> <span class='p'>...</span> <span class='p'>},</span>
  
  <span class='s1'>&#39;li .destroy {Events.destroy}&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>el</span><span class='p'>,</span> <span class='nx'>ev</span> <span class='p'>)</span> <span class='p'>{</span> 
    <span class='c1'>// previous destroy code here</span>
  <span class='p'>}</span>
<span class='p'>})</span>

<span class='c1'>// Events config</span>
<span class='nx'>Events</span> <span class='o'>=</span> <span class='p'>{</span> <span class='nx'>destroy</span><span class='o'>:</span> <span class='s1'>&#39;click&#39;</span> <span class='p'>};</span>

<span class='c1'>// Events.destroy is looked up on the window.</span>
<span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>)</span>
</code></pre>
</div>
<p>The selector can also be templated.</p>

<h3 id='templated_event_handlers_pt_2_'>Templated Event Handlers Pt 2 <code>&quot;{objectName}&quot;</code></h3>

<p>Control can also bind to objects other than <code>this.element</code> with templated event handlers. This is <em>critical</em> for avoiding memory leaks that are common among MVC applications.</p>

<p>If the value inside <code>{NAME}</code> is an object, the event will be bound to that object rather than the control. For example, the following tooltip listens to clicks on the window:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Tooltip</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='s1'>&#39;{window} click&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>el</span><span class='p'>,</span> <span class='nx'>ev</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// hide only if we clicked outside the tooltip</span>
    <span class='k'>if</span> <span class='p'>(</span><span class='o'>!</span><span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>has</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>.</span><span class='nx'>target</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>remove</span><span class='p'>();</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
<span class='p'>})</span>

<span class='c1'>// create a Tooltip</span>
<span class='k'>new</span> <span class='nx'>Tooltip</span><span class='p'>(</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;&lt;div&gt;INFO&lt;/div&gt;&#39;</span><span class='p'>).</span><span class='nx'>appendTo</span><span class='p'>(</span><span class='nx'>el</span><span class='p'>)</span> <span class='p'>)</span>
</code></pre>
</div>
<p>This is convenient when needing to listen to model changes. If EJS was not taking care of removing <code>&lt;li&gt;</code>s after their model was destroyed, we could implement it in <code>Todos</code> like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='s1'>&#39;init&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>element</span> <span class='p'>,</span> <span class='nx'>options</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='kd'>var</span> <span class='nx'>self</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>;</span>
    <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{},</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='nx'>self</span><span class='p'>.</span><span class='nx'>todosList</span> <span class='o'>=</span> <span class='nx'>todos</span><span class='p'>;</span>
      <span class='nx'>self</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todosEJS&#39;</span><span class='p'>,</span> <span class='nx'>todos</span> <span class='p'>)</span> <span class='p'>)</span>
    <span class='p'>})</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;li click&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>li</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>li</span><span class='p'>.</span><span class='nx'>trigger</span><span class='p'>(</span> <span class='s1'>&#39;selected&#39;</span><span class='p'>,</span> <span class='nx'>li</span><span class='p'>.</span><span class='nx'>model</span><span class='p'>()</span> <span class='p'>);</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;li .destroy click&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>el</span><span class='p'>,</span> <span class='nx'>ev</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// get the li element that has todo data</span>
    <span class='kd'>var</span> <span class='nx'>li</span> <span class='o'>=</span> <span class='nx'>el</span><span class='p'>.</span><span class='nx'>closest</span><span class='p'>(</span> <span class='s1'>&#39;li&#39;</span> <span class='p'>);</span>
  
    <span class='c1'>// get the model</span>
    <span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='nx'>li</span><span class='p'>.</span><span class='nx'>data</span><span class='p'>(</span> <span class='s1'>&#39;todo&#39;</span> <span class='p'>)</span>
  
    <span class='c1'>//destroy it</span>
    <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>destroy</span><span class='p'>();</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;{Todo} destroyed&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>Todo</span><span class='p'>,</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>todoDestroyed</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// find where the element is in the list</span>
    <span class='kd'>var</span> <span class='nx'>index</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>todosList</span><span class='p'>.</span><span class='nx'>indexOf</span><span class='p'>(</span> <span class='nx'>todoDestroyed</span> <span class='p'>)</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>children</span><span class='p'>(</span> <span class='s1'>&#39;:nth-child(&#39;</span> <span class='o'>+</span> <span class='p'>(</span> <span class='nx'>index</span> <span class='o'>+</span> <span class='mi'>1</span> <span class='p'>)</span> <span class='o'>+</span> <span class='s1'>&#39;)&#39;</span> <span class='p'>)</span>
        <span class='p'>.</span><span class='nx'>remove</span><span class='p'>()</span>
  <span class='p'>}</span>
<span class='p'>})</span>

<span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='destroy_'>destroy <code>control.destroy()</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Control.prototype.destroy'>can.Control.prototype.destroy</a> unbinds a control&#8217;s event handlers and releases its element, but does not remove the element from the page.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>)</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>destroy</span><span class='p'>();</span>
</code></pre>
</div>
<p>When a control&#8217;s element is removed from the page, <strong>destroy</strong> is called automatically.</p>
<div class='highlight'><pre><code class='javascript'><span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>)</span>
<span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>).</span><span class='nx'>remove</span><span class='p'>();</span>
</code></pre>
</div>
<p>All event handlers bound with Control are unbound when the control is destroyed (or its element is removed).</p>

<p>A brief aside on destroy and templated event binding: Taken together, templated event binding and Control&#8217;s automatic clean-up make it almost impossible to write leaking applications. An application that uses only templated event handlers on controls within the body could free up all data by calling <code>$( document.body ).empty()</code>.</p>

<h3 id='on_'>on <code>control.on()</code></h3>

<p><a href='http://donejs.com/docs.html#!can.Control.prototype.on'>can.Control.prototype.on</a> rebinds a control&#8217;s event handlers. This is useful when you are listening to a specific model instance, and want to change to change to another.</p>

<p>The following <code>Editor</code> widget&#8217;s <strong>todo</strong> method updates the control&#8217;s todo option and then calls <code>on()</code> to rebind <code>&#39;{todo} updated&#39;</code>.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Editor</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='nx'>todo</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>options</span><span class='p'>.</span><span class='nx'>todo</span> <span class='o'>=</span> <span class='nx'>todo</span><span class='p'>;</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>on</span><span class='p'>();</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>setName</span><span class='p'>();</span>
  <span class='p'>},</span>
  <span class='c1'>// a helper that sets the value of the input</span>
  <span class='c1'>// to the todo&#39;s name</span>
  <span class='nx'>setName</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>val</span><span class='p'>(</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>options</span><span class='p'>.</span><span class='nx'>todo</span><span class='p'>.</span><span class='nx'>name</span> <span class='p'>);</span>
  <span class='p'>},</span>
  <span class='c1'>// listen for changes in the todo</span>
  <span class='c1'>// and update the input</span>
  <span class='s1'>&#39;{todo} updated&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>setName</span><span class='p'>();</span>
  <span class='p'>},</span>
  <span class='c1'>// when the input changes</span>
  <span class='c1'>// update the todo instance</span>
  <span class='s1'>&#39;change&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>options</span><span class='p'>.</span><span class='nx'>todo</span>
    <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>val</span><span class='p'>()</span> <span class='p'>)</span>
    <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>save</span><span class='p'>();</span>
  <span class='p'>}</span>
<span class='p'>});</span>

<span class='kd'>var</span> <span class='nx'>todo1</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>id</span><span class='o'>:</span> <span class='mi'>6</span><span class='p'>,</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;trash&#39;</span> <span class='p'>}</span> <span class='p'>),</span>
    <span class='nx'>todo2</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>id</span><span class='o'>:</span> <span class='mi'>6</span><span class='p'>,</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;dishes&#39;</span> <span class='p'>}</span> <span class='p'>);</span>

<span class='c1'>// create the editor</span>
<span class='kd'>var</span> <span class='nx'>editor</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Editor</span><span class='p'>(</span> <span class='s1'>&#39;#editor&#39;</span> <span class='p'>);</span>

<span class='c1'>// show the first todo</span>
<span class='nx'>editor</span><span class='p'>.</span><span class='nx'>todo</span><span class='p'>(</span> <span class='nx'>todo1</span> <span class='p'>)</span>

<span class='c1'>// switch it to the second todo</span>
<span class='nx'>editor</span><span class='p'>.</span><span class='nx'>todo</span><span class='p'>(</span> <span class='nx'>todo2</span> <span class='p'>);</span>
</code></pre>
</div>
<h2 id='canroute_'>can.route <code>can.route( route, [defaults] )</code></h2>

<p><a href='http://donejs.com/docs.html#!can.route'>can.route</a> is the core of CanJS&#8217;s routing functionality. It is a special <a href='#can_observe'>can.Observe</a> that updates <code>window.location.hash</code> when its properties change and updates its properties when <code>window.location.hash</code> changes. <strong>can.route</strong> uses routes to translate URLs into property values. If no routes are provided, it just serializes the route into standard URL-encoded notation. For example:</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// empty the hash</span>
<span class='nb'>window</span><span class='p'>.</span><span class='nx'>location</span><span class='p'>.</span><span class='nx'>hash</span> <span class='o'>=</span> <span class='s1'>&#39;&#39;</span>

<span class='c1'>// the route is empty</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>()</span> <span class='c1'>//-&gt; {}</span>
  
<span class='c1'>// set the hash</span>
<span class='nb'>window</span><span class='p'>.</span><span class='nx'>location</span><span class='p'>.</span><span class='nx'>hash</span> <span class='o'>=</span> <span class='s1'>&#39;#!id=7&#39;</span>

<span class='c1'>// the route data reflects what&#39;s in the hash</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>()</span> <span class='c1'>//-&gt; { id: 7 }</span>

<span class='c1'>// set the route data</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>type</span> <span class='o'>:</span> <span class='s1'>&#39;todos&#39;</span> <span class='p'>}</span> <span class='p'>)</span>

<span class='c1'>// the hash changes to reflect the route data</span>
<span class='nb'>window</span><span class='p'>.</span><span class='nx'>location</span><span class='p'>.</span><span class='nx'>hash</span> <span class='c1'>//-&gt; #!type=todos</span>

<span class='c1'>// set a property on the hash</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;id&#39;</span><span class='p'>,</span> <span class='mi'>5</span> <span class='p'>)</span>

<span class='c1'>// the hash changes again to reflect the route data</span>
<span class='nb'>window</span><span class='p'>.</span><span class='nx'>location</span><span class='p'>.</span><span class='nx'>hash</span> <span class='c1'>//-&gt; #!type=todos&amp;id=5</span>
</code></pre>
</div>
<p>Use <code>can.route( route, defaults )</code> to make pretty URLs:</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// create a route</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>(</span> <span class='s1'>&#39;:type/:id&#39;</span> <span class='p'>)</span>

<span class='c1'>// set the hash to look like the route</span>
<span class='nb'>window</span><span class='p'>.</span><span class='nx'>location</span><span class='p'>.</span><span class='nx'>hash</span> <span class='o'>=</span> <span class='s1'>&#39;#!todo/5&#39;</span>

<span class='c1'>// the route data changes accordingly</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>()</span> <span class='c1'>//-&gt; { type: &#39;todo&#39;, id: 5 }</span>

<span class='c1'>// change the route data with properties</span>
<span class='c1'>// used by the route</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>type</span><span class='o'>:</span> <span class='s1'>&#39;user&#39;</span><span class='p'>,</span> <span class='nx'>id</span><span class='o'>:</span> <span class='mi'>7</span> <span class='p'>}</span> <span class='p'>)</span>

<span class='c1'>// the hash is changed to reflect the route</span>
<span class='nb'>window</span><span class='p'>.</span><span class='nx'>location</span><span class='p'>.</span><span class='nx'>hash</span> <span class='c1'>//-&gt; &#39;#!user/7&#39;</span>

<span class='c1'>// create a default route</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>(</span> <span class='s1'>&#39;&#39;</span><span class='p'>,</span> <span class='p'>{</span> <span class='nx'>type</span><span class='o'>:</span> <span class='s1'>&#39;recipe&#39;</span> <span class='p'>}</span> <span class='p'>)</span>

<span class='c1'>// empty the hash</span>
<span class='nb'>window</span><span class='p'>.</span><span class='nx'>location</span><span class='p'>.</span><span class='nx'>hash</span> <span class='o'>=</span> <span class='s1'>&#39;&#39;</span><span class='p'>;</span>

<span class='c1'>// the route data reflects the default value</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>()</span> <span class='c1'>//-&gt; { type: &#39;recipe&#39; }</span>
</code></pre>
</div>
<h3 id='bind_'>bind <code>route.bind( eventName, handler( event ) )</code></h3>

<p>Use <a href='#can_observe-bind'>bind</a> to listen to changes in the route like:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;id&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>newVal</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;id changed&#39;</span> <span class='p'>);</span>
<span class='p'>});</span>
</code></pre>
</div>
<h3 id='route_events'>route events</h3>

<p>Listen to routes in controls with special &#8220;route&#8221; events like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Routing</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='s1'>&#39;route&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='c1'>// matches empty hash, #, or #!</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;todos/:id route&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>data</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// matches routes like #!todos/5</span>
  <span class='p'>}</span>
<span class='p'>})</span>

<span class='c1'>// create routing control</span>
<span class='k'>new</span> <span class='nx'>Routing</span><span class='p'>(</span> <span class='nb'>document</span><span class='p'>.</span><span class='nx'>body</span> <span class='p'>);</span>
</code></pre>
</div>
<p>The <code>route</code> methods get called back with the route <strong>data</strong>. The empty <code>&quot;route&quot;</code> will be called with no data. But, <code>&quot;todos/:id route&quot;</code> will be called with data like: <code>{id: 6}</code>.</p>

<p>We can update the route by changing can.route&#8217;s data like:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;id&#39;</span><span class='p'>,</span> <span class='s1'>&#39;6&#39;</span> <span class='p'>)</span> <span class='c1'>// window.location.hash = #!todos/6</span>
</code></pre>
</div>
<h3 id='url_'>url <code>can.route.url( options, [merge] )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.route.url'>can.route.url</a> takes attributes and creates a URL that can be used in a link.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>hash</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>url</span><span class='p'>({</span><span class='nx'>id</span><span class='o'>:</span> <span class='mi'>7</span><span class='p'>})</span> <span class='c1'>// #!todos/7</span>
<span class='nb'>window</span><span class='p'>.</span><span class='nx'>location</span><span class='p'>.</span><span class='nx'>hash</span> <span class='o'>=</span> <span class='nx'>hash</span><span class='p'>;</span>
</code></pre>
</div>
<h3 id='link_'>link <code>can.route.link( name, options, props, merge )</code></h3>

<p><a href='http://donejs.com/docs.html#!can.route.link'>can.route.link</a> is used to create a link.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>link</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>link</span><span class='p'>(</span> <span class='s1'>&#39;Todo 5&#39;</span><span class='p'>,</span>
                    <span class='p'>{</span> <span class='nx'>id</span><span class='o'>:</span> <span class='mi'>5</span> <span class='p'>},</span> 
                    <span class='p'>{</span> <span class='nx'>className</span> <span class='o'>:</span> <span class='s1'>&#39;button&#39;</span> <span class='p'>}</span> <span class='p'>);</span>

<span class='nx'>link</span> <span class='c1'>//-&gt; &lt;a href=&quot;#!todos/7&quot; class=&quot;button&quot;&gt;Todo 5&lt;/a&gt;</span>
</code></pre>
</div>
<p>The following enhances the Routing control to listen for <code>&quot;.todo selected&quot;</code> events and change <strong>can.route</strong>. When the can.route changes, it retrieves the todo from the server and updates the editor widget.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Routing</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='nx'>init</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>editor</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Editor</span><span class='p'>(</span> <span class='s1'>&#39;#editor&#39;</span> <span class='p'>)</span>
    <span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>);</span>
  <span class='p'>},</span>
  <span class='c1'>// the index page</span>
  <span class='s1'>&#39;route&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
     <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#editor&#39;</span><span class='p'>).</span><span class='nx'>hide</span><span class='p'>();</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;todos/:id route&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>data</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>$</span><span class='p'>(</span><span class='s2'>&quot;#editor&quot;</span><span class='p'>).</span><span class='nx'>show</span><span class='p'>();</span>
    <span class='kd'>var</span> <span class='nx'>self</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>;</span>
    <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findOne</span><span class='p'>(</span> <span class='nx'>data</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='k'>this</span><span class='p'>.</span><span class='nx'>editor</span><span class='p'>.</span><span class='nx'>update</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>todo</span><span class='o'>:</span> <span class='nx'>todo</span> <span class='p'>}</span> <span class='p'>);</span>
    <span class='p'>})</span>
  <span class='p'>},</span>
  <span class='s1'>&#39;.todo selected&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>el</span><span class='p'>,</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>todo</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>can</span><span class='p'>.</span><span class='nx'>route</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;id&#39;</span><span class='p'>,</span> <span class='nx'>todo</span><span class='p'>.</span><span class='nx'>id</span> <span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>});</span>

<span class='c1'>// create routing control</span>
<span class='k'>new</span> <span class='nx'>Routing</span><span class='p'>(</span> <span class='nb'>document</span><span class='p'>.</span><span class='nx'>body</span> <span class='p'>);</span>
</code></pre>
</div>
<p>The <strong>Routing</strong> control is a traditional controller. It coordinates the <code>Editor</code> and <code>Todos</code> controls with <code>can.route</code> hash data. <code>Editor</code> and <code>Todos</code> are traditional views, consuming models.</p>

<p>If you can understand this, you&#8217;re on your way to mastery of the CanJS MVC architecture. Congrats! <a href='http://donejs.com/docs.html#!tutorials/rapidstart/todos.html'>See it in action</a>.</p>

<h2 id='utilities'>Utilities</h2>

<p>CanJS provides several utility methods. Usually, they are mapped to the underlying library. But, by using only these methods, you can create plugins that work with any library. Also, these methods are required to run CanJS from another library.</p>

<h3 id='string_helpers'>String Helpers</h3>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// remove leading and trailing whitespace</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>trim</span><span class='p'>(</span> <span class='s1'>&#39; foo &#39;</span> <span class='p'>)</span> <span class='c1'>// -&gt; &#39;foo&#39; </span>

<span class='c1'>// escape HTML code</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>esc</span><span class='p'>(</span> <span class='s1'>&#39;&lt;foo&gt;&amp;&lt;bar&gt;&#39;</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;&amp;lt;foo&amp;lt;&amp;amp;&amp;lt;bar&amp;lt;&#39;</span>

<span class='c1'>// looks up an object by name</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>getObject</span><span class='p'>(</span> <span class='s1'>&#39;foo.bar&#39;</span><span class='p'>,</span> <span class='p'>[</span> <span class='p'>{</span> <span class='nx'>foo</span><span class='o'>:</span> <span class='p'>{</span> <span class='nx'>bar</span><span class='o'>:</span> <span class='s1'>&#39;zed&#39;</span> <span class='p'>}</span> <span class='p'>}</span> <span class='p'>]</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;zed&#39;</span>

<span class='c1'>// capitalize a string</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>capitalize</span><span class='p'>(</span> <span class='s1'>&#39;fooBar&#39;</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;FooBar&#39;</span>

<span class='c1'>// micro templating</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>sub</span><span class='p'>(</span> <span class='s1'>&#39;{greet} world&#39;</span><span class='p'>,</span> <span class='p'>{</span> <span class='nx'>greet</span><span class='o'>:</span> <span class='s1'>&#39;hello&#39;</span> <span class='p'>}</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;hello world&#39;</span>

<span class='c1'>// deparams a form encoded URL into an object</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>deparam</span><span class='p'>(</span> <span class='s1'>&#39;foo=bar&amp;hello=world&#39;</span> <span class='p'>)</span>
    <span class='c1'>//-&gt; { foo: &#39;bar&#39;, hello: &#39;world&#39; }</span>
</code></pre>
</div>
<h3 id='array_helpers'>Array Helpers</h3>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// convert array-like data into arrays</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>makeArray</span><span class='p'>(</span> <span class='p'>{</span> <span class='mi'>0</span><span class='o'>:</span> <span class='s2'>&quot;zero&quot;</span><span class='p'>,</span> <span class='mi'>1</span><span class='o'>:</span> <span class='s1'>&#39;one&#39;</span><span class='p'>,</span> <span class='nx'>length</span><span class='o'>:</span> <span class='mi'>2</span> <span class='p'>}</span> <span class='p'>)</span> <span class='c1'>// -&gt; [ &#39;zero&#39;, &#39;one&#39; ]</span>
  
<span class='c1'>// return if an array is an array</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>isArray</span><span class='p'>(</span> <span class='p'>[]</span> <span class='p'>)</span> <span class='c1'>//-&gt; true</span>
  
<span class='c1'>// converts one array to another array</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>map</span><span class='p'>(</span> <span class='p'>[</span> <span class='p'>{</span> <span class='nx'>prop</span><span class='o'>:</span> <span class='s1'>&#39;val1&#39;</span> <span class='p'>},</span> <span class='p'>{</span> <span class='nx'>prop</span><span class='o'>:</span> <span class='s1'>&#39;val2&#39;</span> <span class='p'>}</span> <span class='p'>],</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>val</span><span class='p'>,</span> <span class='nx'>prop</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='k'>return</span> <span class='nx'>val</span>
<span class='p'>})</span>  <span class='c1'>//-&gt; [ &#39;val1&#39;, &#39;val2&#39; ]</span>
  
<span class='c1'>// iterates through an array</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>each</span><span class='p'>(</span> <span class='p'>[</span> <span class='p'>{</span> <span class='nx'>prop</span><span class='o'>:</span> <span class='s1'>&#39;val1&#39;</span> <span class='p'>},</span> <span class='p'>{</span> <span class='nx'>prop</span><span class='o'>:</span> <span class='s1'>&#39;val2&#39;</span> <span class='p'>}</span> <span class='p'>],</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>value</span><span class='p'>,</span> <span class='nx'>index</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='c1'>// function called with</span>
  <span class='c1'>//  value = { prop: &#39;val1&#39; }, index = 0</span>
  <span class='c1'>//  value = { prop: &#39;val2&#39; }, index = 1</span>
<span class='p'>})</span>
</code></pre>
</div>
<h3 id='object_helpers'>Object Helpers</h3>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// extends one object with the properties of another</span>
<span class='kd'>var</span> <span class='nx'>first</span> <span class='o'>=</span> <span class='p'>{},</span>
    <span class='nx'>second</span> <span class='o'>=</span> <span class='p'>{</span> <span class='nx'>a</span><span class='o'>:</span> <span class='s1'>&#39;b&#39;</span> <span class='p'>},</span>
    <span class='nx'>third</span> <span class='o'>=</span> <span class='p'>{</span> <span class='nx'>c</span><span class='o'>:</span> <span class='s1'>&#39;d&#39;</span> <span class='p'>};</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>extend</span><span class='p'>(</span> <span class='nx'>first</span><span class='p'>,</span> <span class='nx'>second</span><span class='p'>,</span> <span class='nx'>third</span> <span class='p'>);</span> <span class='c1'>//-&gt; first</span>
<span class='nx'>first</span>  <span class='c1'>//-&gt; { a: &#39;b&#39;, c: &#39;d&#39; }</span>
<span class='nx'>second</span> <span class='c1'>//-&gt; { a: &#39;b&#39; }</span>
<span class='nx'>third</span>  <span class='c1'>//-&gt; { c: &#39;d&#39; }</span>
  
<span class='c1'>// deep extends one object with another</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>extend</span><span class='p'>(</span> <span class='kc'>true</span><span class='p'>,</span> <span class='nx'>first</span><span class='p'>,</span> <span class='nx'>second</span><span class='p'>,</span> <span class='nx'>third</span> <span class='p'>);</span> 
  
<span class='c1'>// parameterize into a query string</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>param</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>a</span><span class='o'>:</span> <span class='s1'>&#39;b&#39;</span><span class='p'>,</span> <span class='nx'>c</span><span class='o'>:</span> <span class='s1'>&#39;d&#39;</span> <span class='p'>}</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;a=b&amp;c=d&#39;</span>
  
<span class='c1'>// returns if an object is empty</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>isEmptyObject</span><span class='p'>(</span> <span class='p'>{}</span> <span class='p'>)</span>      <span class='c1'>//-&gt; true</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>isEmptyObject</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>a</span><span class='o'>:</span> <span class='s1'>&#39;b&#39;</span> <span class='p'>}</span> <span class='p'>)</span> <span class='c1'>//-&gt; false</span>
</code></pre>
</div>
<h3 id='function_helpers'>Function Helpers</h3>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// returns a function that calls another function</span>
<span class='c1'>// with &#39;this&#39; set.</span>
<span class='kd'>var</span> <span class='nx'>func</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>proxy</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>one</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='k'>return</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>a</span> <span class='o'>+</span> <span class='nx'>one</span>
<span class='p'>},</span> <span class='p'>{</span> <span class='nx'>a</span><span class='o'>:</span> <span class='s1'>&#39;b&#39;</span> <span class='p'>}</span> <span class='p'>);</span> 
<span class='nx'>func</span><span class='p'>(</span> <span class='s1'>&#39;two&#39;</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;btwo&#39;</span>

<span class='c1'>// returns if an object is a function</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>isFunction</span><span class='p'>(</span> <span class='p'>{}</span> <span class='p'>)</span>           <span class='c1'>//-&gt; false</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>isFunction</span><span class='p'>(</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{}</span> <span class='p'>)</span> <span class='c1'>//-&gt; true</span>
</code></pre>
</div>
<h3 id='event_helpers'>Event Helpers</h3>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// binds handler on obj&#39;s eventName event</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='nx'>obj</span><span class='p'>,</span> <span class='nx'>eventName</span><span class='p'>,</span> <span class='nx'>handler</span> <span class='p'>)</span>

<span class='c1'>// unbind handler on obj&#39;s eventName event</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>unbind</span><span class='p'>(</span> <span class='nx'>obj</span><span class='p'>,</span> <span class='nx'>eventName</span><span class='p'>,</span> <span class='nx'>handler</span> <span class='p'>)</span> 
  
<span class='c1'>// binds handler on all elements&#39; eventName event that match selector</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>delegate</span><span class='p'>(</span> <span class='nx'>obj</span><span class='p'>,</span> <span class='nx'>selector</span><span class='p'>,</span> <span class='nx'>eventName</span><span class='p'>,</span> <span class='nx'>handler</span> <span class='p'>)</span>
  
<span class='c1'>// unbinds handler on all elements&#39; eventName event that match selector in obj</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>undelegate</span><span class='p'>(</span> <span class='nx'>obj</span><span class='p'>,</span> <span class='nx'>selector</span><span class='p'>,</span> <span class='nx'>eventName</span> <span class='p'>)</span>
  
<span class='c1'>// executes all handlers attached to obj for eventName</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>trigger</span><span class='p'>(</span> <span class='nx'>obj</span><span class='p'>,</span> <span class='nx'>eventName</span><span class='p'>,</span> <span class='nx'>args</span> <span class='p'>)</span>
</code></pre>
</div>
<h3 id='deferred'>Deferred</h3>

<p>can.Deferreds are explained in greater detail in the <a href='http://donejs.com/docs.html#!can.Deferred'>DoneJS documentation.</a></p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// creates a new Deferred object</span>
<span class='kd'>var</span> <span class='nx'>deferred</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Deferred</span><span class='p'>()</span>

<span class='c1'>// pipes a deferred into another deferred</span>
<span class='nx'>deferred</span><span class='p'>.</span><span class='nx'>pipe</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
	<span class='c1'>// done handler</span>
<span class='p'>},</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{</span>
	<span class='c1'>// fail handler</span>
<span class='p'>})</span>

<span class='c1'>// resolves a deferred (deferreds piped into the deferred also become resolved)</span>
<span class='nx'>deferred</span><span class='p'>.</span><span class='nx'>resolve</span><span class='p'>()</span>
  
<span class='c1'>// rejects a deferred (deferreds piped into the deferred also become rejected)</span>
<span class='nx'>deferred</span><span class='p'>.</span><span class='nx'>reject</span><span class='p'>()</span>
  
<span class='c1'>// used to execute callback functions when all passed deferreds become resolved</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>when</span><span class='p'>()</span>
</code></pre>
</div>
<h3 id='ajax'>Ajax</h3>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// performs an asynchronous HTTP request</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>ajax</span><span class='p'>({</span>
  <span class='nx'>url</span> <span class='o'>:</span> <span class='s1'>&#39;url&#39;</span><span class='p'>,</span>
  <span class='nx'>type</span><span class='o'>:</span> <span class='s1'>&#39;GET&#39;</span><span class='p'>,</span> <span class='c1'>// &#39;POST&#39;</span>
  <span class='nx'>async</span> <span class='o'>:</span> <span class='kc'>false</span><span class='p'>,</span>
  <span class='nx'>dataType</span><span class='o'>:</span> <span class='s1'>&#39;json&#39;</span><span class='p'>,</span>
  <span class='nx'>success</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{},</span>
  <span class='nx'>error</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>()</span> <span class='p'>{}</span>
<span class='p'>})</span> <span class='c1'>//-&gt; deferred</span>
</code></pre>
</div>
<h3 id='htmlelement_helpers'>HTMLElement Helpers</h3>
<div class='highlight'><pre><code class='javascript'><span class='nx'>can</span><span class='p'>.</span><span class='nx'>buildFragment</span><span class='p'>(</span> <span class='nx'>frags</span><span class='p'>,</span> <span class='nx'>nodes</span> <span class='p'>)</span>

<span class='c1'>// a node list</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;div.bar&#39;</span> <span class='p'>)</span> <span class='c1'>//-&gt; []</span>

<span class='c1'>// appends html to the HTMLElements in the NodeList</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>append</span><span class='p'>(</span> <span class='nx'>NodeList</span><span class='p'>,</span> <span class='nx'>html</span> <span class='p'>)</span>
  
<span class='c1'>// removes the HTMLElements in the NodeList from the DOM  </span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>remove</span><span class='p'>(</span> <span class='nx'>NodeList</span> <span class='p'>)</span>
  
<span class='c1'>// stores arbitrary data to the HTMLElements in the NodeList  </span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>data</span><span class='p'>(</span> <span class='nx'>NodeList</span><span class='p'>,</span> <span class='nx'>dataName</span><span class='p'>,</span> <span class='nx'>dataValue</span> <span class='p'>)</span>
  
<span class='c1'>// adds CSS class(es) to the HTMLElements in the NodeList</span>
<span class='nx'>can</span><span class='p'>.</span><span class='nx'>addClass</span><span class='p'>(</span> <span class='nx'>NodeList</span><span class='p'>,</span> <span class='nx'>className</span> <span class='p'>)</span>
</code></pre>
</div>
<p><strong>HTMLElement &#8216;destroyed&#8217; event</strong></p>

<p>When an element is removed from the page using any library, CanJS triggers a &#8216;destroyed&#8217; event on the element. This is used to teardown event handlers in can.Control.</p>

<h2 id='use_with_other_libraries'>Use with other libraries</h2>

<p>CanJS can be used with jQuery, Dojo, Mootools, YUI, or Zepto.</p>

<h3 id='jquery'>jQuery</h3>

<p>CanJS supports jQuery 1.7+. Include a copy of jQuery along with CanJS to get started.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js&quot;</span><span class='nt'>&gt;</span>
<span class='nt'>&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;can.jquery.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
  <span class='c1'>// start using CanJS</span>
  <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>(</span><span class='s1'>&#39;Todo&#39;</span><span class='p'>,</span> <span class='p'>{</span>
    <span class='p'>...</span>
  <span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>CanJS supports binding to any jQuery objects (like jQuery UI widgets) that use standard jQuery events. The jQuery UI Datepicker doesn&#8217;t have built-in support for standard jQuery events, so for those cases, a workaround should be applied:</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js&quot;</span><span class='nt'>&gt;</span>
<span class='nt'>&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;jquery.ui.core.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;jquery.ui.datepicker.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;can.jquery.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
  <span class='c1'>// create models</span>
  <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span> <span class='p'>...</span> <span class='p'>});</span>
  <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>List</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>.</span><span class='nx'>List</span><span class='p'>({</span> <span class='p'>...</span> <span class='p'>});</span>

  <span class='c1'>// create control</span>
  <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
    <span class='c1'>// listen to the calendar widget&#39;s datepickerselect event</span>
    <span class='s1'>&#39;{calendar} datepickerselect&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>calendar</span><span class='p'>,</span> <span class='nx'>ev</span><span class='p'>){</span>
      <span class='c1'>// do something with the selected date</span>
      <span class='kd'>var</span> <span class='nx'>selectedDate</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>options</span><span class='p'>.</span><span class='nx'>calendar</span><span class='p'>.</span><span class='nx'>datepicker</span><span class='p'>(</span><span class='s1'>&#39;getDate&#39;</span><span class='p'>);</span>
      <span class='p'>...</span>
    <span class='p'>}</span>
  <span class='p'>});</span>

  <span class='c1'>// Initialize the app</span>
  <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>({},</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>todos</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span><span class='s1'>&#39;#todoapp&#39;</span><span class='p'>,</span> <span class='p'>{</span>
      <span class='nx'>todos</span><span class='o'>:</span> <span class='nx'>todos</span><span class='p'>,</span>
      <span class='nx'>calendar</span><span class='o'>:</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#calendar&#39;</span><span class='p'>).</span><span class='nx'>hide</span><span class='p'>().</span><span class='nx'>datepicker</span><span class='p'>({</span>
        <span class='c1'>// Adding a workaround for date selection since the </span>
        <span class='c1'>// jQuery UI datepicker widget doesn&#39;t fire the </span>
        <span class='c1'>// &quot;datepickerselect&quot; event</span>
        <span class='nx'>onSelect</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>dateText</span><span class='p'>,</span> <span class='nx'>datepicker</span><span class='p'>)</span> <span class='p'>{</span>
          <span class='nx'>$</span><span class='p'>(</span><span class='k'>this</span><span class='p'>).</span><span class='nx'>trigger</span><span class='p'>({</span>
            <span class='nx'>type</span><span class='o'>:</span> <span class='s1'>&#39;datepickerselect&#39;</span><span class='p'>,</span>
            <span class='nx'>text</span><span class='o'>:</span> <span class='nx'>dateText</span><span class='p'>,</span>
            <span class='nx'>target</span><span class='o'>:</span> <span class='nx'>datepicker</span>
          <span class='p'>});</span>
        <span class='p'>}</span>
      <span class='p'>})</span>
    <span class='p'>});</span>
  <span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<h3 id='dojo'>Dojo</h3>

<p>CanJS supports Dojo 1.7+ using its new AMD loader in asynchronous or synchronous mode. CanJS depends on the following Dojo modules: <strong>dojo</strong>, <strong>dojo/query</strong>, <strong>dojo/NodeList-dom</strong> and <strong>dojo/NodeList-traverse</strong>. It also uses the <strong>plugd/trigger</strong> plugin for internal object and node event triggering.</p>

<p>Include a copy of Dojo and add the <code>&#39;can/dojo&#39;</code> module as a dependency in your require statement to get started.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&#39;text/javascript&#39;</span> <span class='na'>src=</span><span class='s'>&#39;path/to/js/dojo.js&#39;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
<span class='nx'>require</span><span class='p'>([</span><span class='s1'>&#39;can/dojo&#39;</span><span class='p'>],</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>can</span><span class='p'>){</span> <span class='c1'>//will load path/to/js/can/dojo.js</span>
  <span class='c1'>// start using CanJS</span>
  <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
    <span class='p'>...</span>
  <span class='p'>});</span>
<span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>If you are including Dojo from a CDN or you want more control over your file structure, you will need to configure the packages path to <code>&#39;can/dojo&#39;</code>. This is done by declaring a variable named <a href='http://dojotoolkit.org/documentation/tutorials/1.7/dojo_config/'>dojoConfig</a> containing an array of package paths before including the Dojo library.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script&gt;</span>
<span class='c1'>//Using dojoConfig to load can/dojo from a local directory</span>
<span class='kd'>var</span> <span class='nx'>dojoConfig</span> <span class='o'>=</span> <span class='p'>{</span>
  <span class='nx'>packages</span><span class='o'>:</span> <span class='p'>[{</span>
    <span class='nx'>name</span><span class='o'>:</span> <span class='s2'>&quot;can/dojo&quot;</span><span class='p'>,</span>
    <span class='nx'>location</span><span class='o'>:</span> <span class='nx'>location</span><span class='p'>.</span><span class='nx'>pathname</span><span class='p'>.</span><span class='nx'>replace</span><span class='p'>(</span><span class='sr'>/\/[^/]+$/</span><span class='p'>,</span> <span class='s2'>&quot;&quot;</span><span class='p'>),</span>
    <span class='nx'>main</span><span class='o'>:</span> <span class='s2'>&quot;can.dojo.js&quot;</span>
  <span class='p'>}]</span>
<span class='p'>}</span>
<span class='nt'>&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&#39;text/javascript&#39;</span> <span class='na'>src=</span><span class='s'>&#39;http://ajax.googleapis.com/ajax/libs/dojo/</span>
<span class='s'>1.7.1/dojo/dojo.js&#39;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
<span class='nx'>require</span><span class='p'>([</span><span class='s1'>&#39;can/dojo&#39;</span><span class='p'>],</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>can</span><span class='p'>){</span>
  <span class='c1'>// start using CanJS</span>
  <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
    <span class='p'>...</span>
  <span class='p'>});</span>
<span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>You can also configure package paths using the <a href='http://dojotoolkit.org/documentation/tutorials/1.7/modules/'>require function</a>.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&#39;text/javascript&#39;</span> <span class='na'>src=</span><span class='s'>&#39;http://ajax.googleapis.com/ajax/libs/dojo/</span>
<span class='s'>1.7.1/dojo/dojo.js&#39;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
<span class='c1'>//Using require to load can/dojo from a local directory</span>
<span class='nx'>require</span><span class='p'>({</span>
  <span class='nx'>packages</span><span class='o'>:</span> <span class='p'>[{</span>
    <span class='nx'>name</span><span class='o'>:</span> <span class='s2'>&quot;can/dojo&quot;</span><span class='p'>,</span>
    <span class='nx'>location</span><span class='o'>:</span> <span class='nx'>location</span><span class='p'>.</span><span class='nx'>pathname</span><span class='p'>.</span><span class='nx'>replace</span><span class='p'>(</span><span class='sr'>/\/[^/]+$/</span><span class='p'>,</span> <span class='s2'>&quot;&quot;</span><span class='p'>),</span>
    <span class='nx'>main</span><span class='o'>:</span> <span class='s2'>&quot;can.dojo&quot;</span>
  <span class='p'>}]</span>
<span class='p'>},</span> <span class='p'>[</span><span class='s1'>&#39;can/dojo&#39;</span><span class='p'>,],</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>can</span><span class='p'>){</span>
  <span class='c1'>// start using CanJS</span>
  <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
    <span class='p'>...</span>
  <span class='p'>});</span>
<span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>CanJS can bind to any Dijit, Dojox or custom widget events using <a href='#can_control-templated_event_handlers_pt_2'>templated event binding</a>. Below is an example of binding to the <strong>onChange</strong> event of the dijit.CalendarLite widget:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>require</span><span class='p'>([</span><span class='s1'>&#39;can/dojo&#39;</span><span class='p'>,</span> 
  <span class='s1'>&#39;dijit/CalendarLite&#39;</span><span class='p'>],</span> 
<span class='kd'>function</span><span class='p'>(</span><span class='nx'>can</span><span class='p'>,</span> <span class='nx'>CalendarLite</span><span class='p'>){</span>
  <span class='c1'>//Define a Control</span>
  <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
    <span class='c1'>//events are lowercase and don&#39;t use on (onChange -&gt; change)</span>
    <span class='s2'>&quot;{calendar} change&quot;</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>calendar</span><span class='p'>,</span> <span class='nx'>newDate</span><span class='p'>)</span> <span class='p'>{</span>
      <span class='c1'>//onChange handler: do something with the newDate selected</span>
    <span class='p'>}</span>
  <span class='p'>});</span>
  
  <span class='c1'>//Initialize app with a calendar widget</span>
  <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span><span class='s1'>&#39;#todoList&#39;</span><span class='p'>,</span> <span class='p'>{</span>
    <span class='nx'>calendar</span><span class='o'>:</span> <span class='k'>new</span> <span class='nx'>CalendarLite</span><span class='p'>({},</span> <span class='s2'>&quot;calendar&quot;</span><span class='p'>)</span>
  <span class='p'>});</span>
<span class='p'>});</span>
</code></pre>
</div>
<h3 id='mootools'>Mootools</h3>

<p>CanJS supports Mootools 1.4+. Include a copy of Mootools Core along with CanJS to get started.</p>

<p>Mootools Core has an issue where <strong>focus</strong> and <strong>blur</strong> events are not fired for delegate event listeners. Include Mootools More&#8217;s Event.Pseudos module for <strong>focus</strong> and <strong>blur</strong> support.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;https://ajax.googleapis.com/ajax/libs/mootools/1.4.3/</span>
<span class='s'>mootools.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='c'>&lt;!-- Mootools More Event.Pseudos module --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;mootools-more-event_pseudos-1.4.0.1.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;can.mootools.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
  <span class='c1'>// start using CanJS</span>
  <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
    <span class='p'>...</span>
  <span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<h3 id='yui'>YUI</h3>

<p>CanJS supports YUI 3.4+ with both dynamically or statically loaded modules. CanJS depends on the following YUI modules: <strong>node</strong>, <strong>io-base</strong>, <strong>querystring</strong>, <strong>event-focus</strong>, and <strong>array-extras</strong>. The <strong>selector-css2</strong> and <strong>selector-css3</strong> YUI modules are optional, but necessary for IE7 and other browsers that don&#8217;t support <strong>querySelectorAll</strong>.</p>

<p>To use with dynamically loaded modules, include the YUI loader along with CanJS. Add <code>&#39;can&#39;</code> to your normal list of modules with <code>YUI().use(&#39;can&#39;, ...)</code> wherever CanJS will be used.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;http://yui.yahooapis.com/3.4.1/build/yui/yui-min.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;can.yui.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
  <span class='c1'>// CanJS with support for modern browsers</span>
  <span class='nx'>YUI</span><span class='p'>().</span><span class='nx'>use</span><span class='p'>(</span><span class='s1'>&#39;can&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>Y</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// start using CanJS</span>
    <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
      <span class='p'>...</span>
    <span class='p'>});</span>
  <span class='p'>});</span>
  
  <span class='c1'>// CanJS with support for IE7 and other browsers without querySelectorAll</span>
  <span class='nx'>YUI</span><span class='p'>({</span> <span class='nx'>loadOptional</span><span class='o'>:</span> <span class='kc'>true</span> <span class='p'>}).</span><span class='nx'>use</span><span class='p'>(</span><span class='s1'>&#39;can&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>Y</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// start using CanJS</span>
    <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
      <span class='p'>...</span>
    <span class='p'>});</span>
  <span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>To use with statically loaded modules, include a static copy of YUI (with the previously mentioned YUI dependencies) along with CanJS. CanJS will automatically be included wherever <code>YUI().use(&#39;*&#39;)</code> is used.</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- YUI Configurator: http://yuilibrary.com/yui/configurator/ --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;http://yui.yahooapis.com/combo?3.4.1/build/yui-base/yui-base-min.</span>
<span class='s'>js&amp;3.4.1/build/oop/oop-min.js&amp;3.4.1/build/event-custom-base/event-custom-base-</span>
<span class='s'>min.js&amp;3.4.1/build/features/features-min.js&amp;3.4.1/build/dom-core/dom-core-min.</span>
<span class='s'>js&amp;3.4.1/build/dom-base/dom-base-min.js&amp;3.4.1/build/selector-native/selector-n</span>
<span class='s'>ative-min.js&amp;3.4.1/build/selector/selector-min.js&amp;3.4.1/build/node-core/node-c</span>
<span class='s'>ore-min.js&amp;3.4.1/build/node-base/node-base-min.js&amp;3.4.1/build/event-base/event</span>
<span class='s'>-base-min.js&amp;3.4.1/build/event-delegate/event-delegate-min.js&amp;3.4.1/build/node</span>
<span class='s'>-event-delegate/node-event-delegate-min.js&amp;3.4.1/build/pluginhost-base/pluginh</span>
<span class='s'>ost-base-min.js&amp;3.4.1/build/pluginhost-config/pluginhost-config-min.js&amp;3.4.1/b</span>
<span class='s'>uild/node-pluginhost/node-pluginhost-min.js&amp;3.4.1/build/dom-style/dom-style-mi</span>
<span class='s'>n.js&amp;3.4.1/build/dom-screen/dom-screen-min.js&amp;3.4.1/build/node-screen/node-scr</span>
<span class='s'>een-min.js&amp;3.4.1/build/node-style/node-style-min.js&amp;3.4.1/build/querystring-st</span>
<span class='s'>ringify-simple/querystring-stringify-simple-min.js&amp;3.4.1/build/io-base/io-base</span>
<span class='s'>-min.js&amp;3.4.1/build/array-extras/array-extras-min.js&amp;3.4.1/build/querystring-p</span>
<span class='s'>arse/querystring-parse-min.js&amp;3.4.1/build/querystring-stringify/querystring-st</span>
<span class='s'>ringify-min.js&amp;3.4.1/build/event-custom-complex/event-custom-complex-min.js&amp;3.</span>
<span class='s'>4.1/build/event-synthetic/event-synthetic-min.js&amp;3.4.1/build/event-focus/event</span>
<span class='s'>-focus-min.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;can.yui.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
  <span class='nx'>YUI</span><span class='p'>().</span><span class='nx'>use</span><span class='p'>(</span><span class='s1'>&#39;*&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>Y</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// start using CanJS</span>
    <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
      <span class='p'>...</span>
    <span class='p'>});</span>
  <span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>CanJS can also bind to YUI widget events. The following example shows how to bind to the <strong>selectionChange</strong> event for a YUI Calendar widget:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>YUI</span><span class='p'>().</span><span class='nx'>use</span><span class='p'>(</span><span class='s1'>&#39;can&#39;</span><span class='p'>,</span> <span class='s1'>&#39;calendar&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>Y</span><span class='p'>)</span> <span class='p'>{</span>
  <span class='c1'>// create models</span>
  <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span> <span class='p'>...</span> <span class='p'>});</span>
  <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>List</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>.</span><span class='nx'>List</span><span class='p'>({</span> <span class='p'>...</span> <span class='p'>});</span>

  <span class='c1'>// create control</span>
  <span class='nx'>Todos</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
    <span class='c1'>// listen to the calendar widget&#39;s selectionChange event</span>
    <span class='s1'>&#39;{calendar} selectionChange&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>calendar</span><span class='p'>,</span> <span class='nx'>ev</span><span class='p'>){</span>
      <span class='c1'>// do something with the selected date</span>
      <span class='kd'>var</span> <span class='nx'>selectedDate</span> <span class='o'>=</span> <span class='nx'>ev</span><span class='p'>.</span><span class='nx'>newSelection</span><span class='p'>[</span><span class='mi'>0</span><span class='p'>];</span>
      <span class='p'>...</span>
    <span class='p'>}</span>
  <span class='p'>});</span>

  <span class='c1'>// initialize the app</span>
  <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>({},</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>todos</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>new</span> <span class='nx'>Todos</span><span class='p'>(</span><span class='s1'>&#39;#todoapp&#39;</span><span class='p'>,</span> <span class='p'>{</span>
      <span class='nx'>todos</span><span class='o'>:</span> <span class='nx'>todos</span><span class='p'>,</span>
      <span class='nx'>calendar</span><span class='o'>:</span> <span class='k'>new</span> <span class='nx'>Y</span><span class='p'>.</span><span class='nx'>Calendar</span><span class='p'>({</span>
        <span class='nx'>contentBox</span><span class='o'>:</span> <span class='s2'>&quot;#calendar&quot;</span>
      <span class='p'>}).</span><span class='nx'>render</span><span class='p'>()</span>
    <span class='p'>});</span>
  <span class='p'>});</span>
<span class='p'>});</span>
</code></pre>
</div>
<h3 id='zepto'>Zepto</h3>

<p>CanJS supports Zepto 0.8+. Include a copy of Zepto along with CanJS to get started.</p>

<p>Zepto 0.8 has an issue where <strong>focus</strong> and <strong>blur</strong> events are not fired for delegate event listeners. There is a fix included for Zepto &gt; 0.8, but you can apply <a href='https://github.com/madrobby/zepto/commit/ab2a3ef0d18beaf768903f0943efd019a29803f0'>this patch</a> to <strong>zepto.js</strong> when using Zepto 0.8.</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- Zepto 0.8 with focus/blur patch applied --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;zepto.0.8-focusblur.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>src=</span><span class='s'>&quot;can.zepto.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script&gt;</span>
  <span class='c1'>// start using CanJS</span>
  <span class='nx'>Todo</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
    <span class='p'>...</span>
  <span class='p'>});</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<h2 id='plugins'>Plugins</h2>

<h3 id='canconstructproxy_'>can.Construct.proxy <code>construct.proxy( methodname, [ curriedArgs ] )</code></h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.construct.proxy.1.0b2.js'>can.construct.proxy.js</a></p>

<p>The <a href='http://donejs.com/docs.html#!can.Construct.proxy'>can.Construct.proxy</a> plugin adds a <em>proxy</em> method that takes a function name and returns a new function that will always have <code>this</code> set to the original context. You can also curry arguments that will be added to the beginning of the proxied functions argument list:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Person</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Construct</span><span class='p'>({</span>
  <span class='nx'>init</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>name</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>name</span> <span class='o'>=</span> <span class='nx'>name</span><span class='p'>;</span>
  <span class='p'>},</span>

  <span class='nx'>sayName</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>text</span><span class='p'>,</span> <span class='nx'>end</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>return</span> <span class='nx'>text</span> <span class='o'>+</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>name</span> <span class='o'>+</span> <span class='nx'>end</span><span class='p'>;</span>
  <span class='p'>}</span>
<span class='p'>});</span>

<span class='kd'>var</span> <span class='nx'>instance</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Person</span><span class='p'>(</span> <span class='s1'>&#39;John&#39;</span> <span class='p'>);</span>
<span class='kd'>var</span> <span class='nx'>callback</span> <span class='o'>=</span> <span class='nx'>instance</span><span class='p'>.</span><span class='nx'>proxy</span><span class='p'>(</span> <span class='s1'>&#39;sayName&#39;</span> <span class='p'>);</span>
<span class='kd'>var</span> <span class='nx'>curriedCallback</span> <span class='o'>=</span> <span class='nx'>instance</span><span class='p'>.</span><span class='nx'>proxy</span><span class='p'>(</span> <span class='s1'>&#39;sayName&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Hi my name is&#39;</span> <span class='p'>);</span>

<span class='nx'>callback</span><span class='p'>(</span> <span class='s1'>&#39;Hi I am &#39;</span><span class='p'>,</span> <span class='s1'>&#39; :)&#39;</span> <span class='p'>);</span> <span class='c1'>// -&gt; &#39;Hi I am John :)&#39;</span>
<span class='nx'>curriedCallback</span><span class='p'>(</span> <span class='s1'>&#39;!&#39;</span> <span class='p'>);</span> <span class='c1'>// -&gt; &#39;Hi my name is John!&#39;</span>
</code></pre>
</div>
<h3 id='canconstructsuper'>can.Construct.super</h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.construct.super.1.0b2.js'>can.construct.super.js</a></p>

<p>The <a href='http://donejs.com/docs.html#!can.Construct.super'>can.Construct.super</a> plugin provides access to overwritten methods using <code>this._super</code> when extending a can.Construct:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>ImprovedPerson</span> <span class='o'>=</span> <span class='nx'>Person</span><span class='p'>({</span>
  <span class='nx'>init</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>name</span><span class='p'>,</span> <span class='nx'>lastName</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>_super</span><span class='p'>(</span> <span class='nx'>name</span> <span class='p'>);</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>lastName</span> <span class='o'>=</span> <span class='nx'>lastName</span><span class='p'>;</span>
  <span class='p'>},</span>

  <span class='nx'>sayName</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>text</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>return</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>_super</span><span class='p'>(</span> <span class='nx'>text</span><span class='p'>,</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>lastName</span> <span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>});</span>

<span class='kd'>var</span> <span class='nx'>improvedPerson</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>ImprovedPerson</span><span class='p'>(</span> <span class='s1'>&#39;John&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Doe&#39;</span> <span class='p'>);</span>
<span class='nx'>improvedPerson</span><span class='p'>.</span><span class='nx'>sayName</span><span class='p'>(</span> <span class='s1'>&#39;To whom it may concern, I am &#39;</span> <span class='p'>);</span>
<span class='c1'>// -&gt; &#39;To whom it may concern, I am John Doe&#39;</span>
</code></pre>
</div>
<h3 id='canobservedelegate_'>can.Observe.delegate <code>observe.delegate( name, event, handler )</code></h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.observe.delegate.1.0b2.js'>can.observe.delegate.js</a></p>

<p>Use the <a href='http://donejs.com/docs.html#!can.Observe.delegate'>can.Observe.delegate</a> plugin to listen to <em>change</em>, <em>set</em>, <em>add</em> and <em>remove</em> on any direct, child or wildcard attribute:</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// create an observable</span>
<span class='kd'>var</span> <span class='nx'>observe</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Observe</span><span class='p'>({</span>
  <span class='nx'>foo</span><span class='o'>:</span> <span class='p'>{</span>
    <span class='nx'>bar</span><span class='o'>:</span> <span class='s1'>&#39;Hello World&#39;</span><span class='p'>,</span>
    <span class='nx'>baz</span><span class='o'>:</span> <span class='s1'>&#39;Hi there&#39;</span>
  <span class='p'>}</span>
<span class='p'>});</span>

<span class='c1'>//listen to changes on a property</span>
<span class='nx'>observe</span><span class='p'>.</span><span class='nx'>delegate</span><span class='p'>(</span> <span class='s1'>&#39;foo.bar&#39;</span><span class='p'>,</span> <span class='s1'>&#39;change&#39;</span><span class='p'>,</span>
  <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>prop</span><span class='p'>,</span> <span class='nx'>how</span><span class='p'>,</span> <span class='nx'>newVal</span><span class='p'>,</span> <span class='nx'>oldVal</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='s1'>&#39;foo.bar has changed to &#39;</span> <span class='o'>+</span> <span class='nx'>newVal</span> <span class='p'>);</span>
<span class='p'>});</span>

<span class='nx'>observe</span><span class='p'>.</span><span class='nx'>delegate</span><span class='p'>(</span> <span class='s1'>&#39;foo.*&#39;</span><span class='p'>,</span> <span class='s1'>&#39;change&#39;</span><span class='p'>,</span>
  <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>prop</span><span class='p'>,</span> <span class='nx'>how</span><span class='p'>,</span> <span class='nx'>newVal</span><span class='p'>,</span> <span class='nx'>oldVal</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>console</span><span class='p'>.</span><span class='nx'>log</span><span class='p'>(</span> <span class='nx'>prop</span> <span class='o'>+</span> <span class='s1'>&#39; has changed &#39;</span> <span class='p'>);</span>
<span class='p'>});</span>

<span class='c1'>// change the property</span>
<span class='nx'>observe</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;foo.bar&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Goodbye Cruel World&#39;</span> <span class='p'>);</span>
<span class='nx'>observe</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;foo.baz&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Bye you&#39;</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='canobservesetter'>can.Observe.setter</h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.observe.setter.1.0b2.js'>can.observe.setter.js</a></p>

<p>With the <a href='http://donejs.com/docs.html#!can.Observe.setter'>can.Observe.setter</a> plugin you can use attribute setter methods to process the value being set:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Person</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Observe</span><span class='p'>({</span>
  <span class='nx'>setName</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>name</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='k'>return</span> <span class='nx'>name</span><span class='p'>.</span><span class='nx'>charAt</span><span class='p'>(</span> <span class='mi'>0</span> <span class='p'>).</span><span class='nx'>toUpperCase</span><span class='p'>()</span> <span class='o'>+</span> <span class='nx'>name</span><span class='p'>.</span><span class='nx'>slice</span><span class='p'>(</span> <span class='mi'>1</span> <span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>});</span>

<span class='kd'>var</span> <span class='nx'>instance</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Person</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;john&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
<span class='c1'>// -&gt; instance.name now is &#39;John&#39;</span>

<span class='nx'>instance</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span><span class='p'>,</span> <span class='s1'>&#39;doe&#39;</span> <span class='p'>);</span>
<span class='c1'>// -&gt; instance.name now is &#39;Doe&#39;</span>
</code></pre>
</div>
<h3 id='canobserveattributes'>can.Observe.attributes</h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.observe.attributes.1.0b2.js'>can.observe.attributes.js</a></p>

<p>The <a href='http://donejs.com/docs.html#!can.Observe.attributes'>can.Observe.attributes</a> plugin allows you to specify attributes with type converters and serializers. Serializers make it handy when preparing your data to send to the server for JavaScript objects like dates or associations.</p>

<p>The following example creates a Birthday observe that defines a <em>birthday</em> attribute of type date. The <a href='http://donejs.com/docs.html#!can.Observe.static.serialize'>serialize</a> and <a href='http://donejs.com/docs.html#!can.Observe.static.convert'>convert</a> properties allows you to implement your own conversion and serialization for each type.</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Birthday</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Observe</span><span class='p'>({</span>
  <span class='nx'>attributes</span><span class='o'>:</span> <span class='p'>{</span>
    <span class='nx'>birthday</span><span class='o'>:</span> <span class='s1'>&#39;date&#39;</span>
  <span class='p'>},</span>
  
  <span class='nx'>serialize</span> <span class='o'>:</span> <span class='p'>{</span>
   <span class='nx'>date</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>val</span><span class='p'>,</span> <span class='nx'>type</span> <span class='p'>){</span>
    <span class='k'>return</span> <span class='nx'>val</span><span class='p'>.</span><span class='nx'>getYear</span><span class='p'>()</span> <span class='o'>+</span> 
     <span class='s2'>&quot;-&quot;</span> <span class='o'>+</span> <span class='p'>(</span><span class='nx'>val</span><span class='p'>.</span><span class='nx'>getMonth</span><span class='p'>()</span> <span class='o'>+</span> <span class='mi'>1</span><span class='p'>)</span> <span class='o'>+</span> 
     <span class='s2'>&quot;-&quot;</span> <span class='o'>+</span> <span class='nx'>val</span><span class='p'>.</span><span class='nx'>getDate</span><span class='p'>();</span> 
    <span class='p'>}</span>
  <span class='p'>},</span>
  
  <span class='nx'>convert</span><span class='o'>:</span> <span class='p'>{</span>
    <span class='c1'>// converts string to date</span>
    <span class='nx'>date</span> <span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>date</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='k'>if</span> <span class='p'>(</span> <span class='k'>typeof</span> <span class='nx'>date</span> <span class='o'>==</span> <span class='s1'>&#39;string&#39;</span> <span class='p'>)</span> <span class='p'>{</span>
        <span class='c1'>//- Extracts dates formated &#39;YYYY-DD-MM&#39;</span>
        <span class='kd'>var</span> <span class='nx'>matches</span> <span class='o'>=</span> <span class='nx'>raw</span><span class='p'>.</span><span class='nx'>match</span><span class='p'>(</span> <span class='sr'>/(\d+)-(\d+)-(\d+)/</span> <span class='p'>);</span> 
        
        <span class='c1'>//- Parses to date object and returns</span>
        <span class='nx'>date</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nb'>Date</span><span class='p'>(</span> <span class='nx'>matches</span><span class='p'>[</span> <span class='mi'>1</span> <span class='p'>],</span> 
                         <span class='p'>(</span> <span class='o'>+</span><span class='nx'>matches</span><span class='p'>[</span> <span class='mi'>2</span> <span class='p'>]</span> <span class='p'>)</span> <span class='o'>-</span> <span class='mi'>1</span><span class='p'>,</span> 
                         <span class='nx'>matches</span><span class='p'>[</span> <span class='mi'>3</span> <span class='p'>]</span> <span class='p'>);</span> 
      <span class='p'>}</span>
      
      <span class='k'>return</span> <span class='nx'>date</span><span class='p'>;</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
<span class='p'>},</span> <span class='p'>{});</span>


<span class='kd'>var</span> <span class='nx'>brian</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Birthday</span><span class='p'>();</span>

<span class='c1'>// sets brian&#39;s birthday</span>
<span class='nx'>brian</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span><span class='s1'>&#39;birthday&#39;</span><span class='p'>,</span> <span class='s1'>&#39;11-29-1983&#39;</span><span class='p'>);</span>

<span class='c1'>//- returns newly converted date object</span>
<span class='kd'>var</span> <span class='nx'>date</span> <span class='o'>=</span> <span class='nx'>brian</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span><span class='s1'>&#39;birthday&#39;</span><span class='p'>);</span>

<span class='c1'>//- returns { &#39;birthday&#39;: &#39;11-29-1983&#39; }</span>
<span class='kd'>var</span> <span class='nx'>seralizedObj</span> <span class='o'>=</span> <span class='nx'>brian</span><span class='p'>.</span><span class='nx'>serialize</span><span class='p'>();</span>
</code></pre>
</div>
<h3 id='canobservevalidations_'>can.Observe.validations <code>observe.validate( attribute, validator )</code></h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.observe.validations.1.0b2.js'>can.observe.validations.js</a></p>

<p><a href='http://donejs.com/docs.html#!can.Observe.validations'>can.Observe.validations</a> adds validation to a can.Observe. Call the <em>validate</em> method in the <em>init</em> constructor with the attribute name and the validation function and then use <em>errors</em> to retrieve the error messages:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Person</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>({</span>
  <span class='nx'>findAll</span> <span class='o'>:</span> <span class='s1'>&#39;GET /people&#39;</span><span class='p'>,</span>
  <span class='nx'>findOne</span> <span class='o'>:</span> <span class='s1'>&#39;GET /people/{id}&#39;</span><span class='p'>,</span>
  <span class='nx'>create</span>  <span class='o'>:</span> <span class='s1'>&#39;POST /people&#39;</span><span class='p'>,</span>
  <span class='nx'>update</span>  <span class='o'>:</span> <span class='s1'>&#39;PUT /people/{id}&#39;</span><span class='p'>,</span>
  <span class='nx'>destroy</span> <span class='o'>:</span> <span class='s1'>&#39;DELETE /people/{id}&#39;</span><span class='p'>,</span>
  
  <span class='nx'>init</span><span class='o'>:</span><span class='kd'>function</span><span class='p'>(){</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>validate</span><span class='p'>(</span><span class='s1'>&#39;name&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>name</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='k'>if</span> <span class='p'>(</span> <span class='o'>!</span><span class='nx'>name</span> <span class='p'>)</span> <span class='p'>{</span>
        <span class='k'>return</span> <span class='s1'>&#39;Name can not be empty!&#39;</span><span class='p'>;</span>
      <span class='p'>}</span>
    <span class='p'>})</span>
  <span class='p'>}</span>
<span class='p'>},</span> <span class='p'>{</span> <span class='p'>});</span>

<span class='kd'>var</span> <span class='nx'>john</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Person</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span> <span class='o'>:</span> <span class='s1'>&#39;&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
<span class='nx'>john</span><span class='p'>.</span><span class='nx'>errors</span><span class='p'>();</span>
<span class='c1'>// -&gt; { name: [ &#39;Name can not be empty&#39; ] }</span>
</code></pre>
</div>
<h3 id='canobservebackup_'>can.Observe.backup <code>observe.backup()</code></h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.observe.backup.1.0b2.js'>can.observe.backup.js</a></p>

<p>You can backup and restore can.Observe data using the <a href='http://donejs.com/docs.html#!can.Observe.backup'>can.Observe.backup</a> plugin. To backup the observe in its current state call <em>backup</em>. To revert it back to that state use <em>restore</em>:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>todo</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Todo</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;do the dishes&#39;</span> <span class='p'>}</span> <span class='p'>);</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>backup</span><span class='p'>();</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Do not do the dishes&#39;</span> <span class='p'>);</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>isDirty</span><span class='p'>();</span> <span class='c1'>// -&gt; true</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>restore</span><span class='p'>();</span>
<span class='nx'>todo</span><span class='p'>.</span><span class='nx'>name</span> <span class='c1'>// -&gt; &#39;do the dishes&#39;</span>
</code></pre>
</div>
<h3 id='cancontrolplugin'>can.Control.plugin</h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.control.plugin.1.0b2.js'>can.control.plugin.js</a></p>

<p><a href='http://donejs.com/docs.html#!can.Control.plugin'>can.Control.plugin</a> registers a jQuery plugin function with a given <em>pluginName</em> that instantiates a can.Control. For example with this can.Control:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Tabs</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='nx'>pluginName</span><span class='o'>:</span> <span class='s1'>&#39;tabs&#39;</span>
<span class='p'>},{</span>
  <span class='nx'>init</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>element</span><span class='p'>,</span> <span class='nx'>options</span> <span class='p'>)</span> <span class='p'>{},</span>
  <span class='nx'>update</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>options</span> <span class='p'>)</span> <span class='p'>{},</span>
  <span class='nx'>activate</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>index</span> <span class='p'>)</span> <span class='p'>{}</span>
<span class='p'>});</span>
</code></pre>
</div>
<p>You can instantiate it by calling the plugin like this:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;.tabs&#39;</span> <span class='p'>).</span><span class='nx'>tabs</span><span class='p'>();</span>
</code></pre>
</div>
<p>Once created any subsequent plugin call will trigger <em>update</em> on your control with the options passed to the plugin. You can also call methods on the control instance like so:</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>// Call the activate method</span>
<span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;.tabs&#39;</span> <span class='p'>).</span><span class='nx'>tabs</span><span class='p'>(</span> <span class='s1'>&#39;activate&#39;</span><span class='p'>,</span> <span class='mi'>0</span> <span class='p'>);</span>
</code></pre>
</div>
<p>Note that calling a method like this will return a jQuery object, not the actual return value. You can retrieve the controller instance directly using the <em>.controls()</em> or <em>.control()</em> helpers included in this plugin.</p>
<div class='highlight'><pre><code class='javascript'><span class='c1'>//- Returns an array of controllers on the match</span>
<span class='kd'>var</span> <span class='nx'>allControls</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;.tabs&#39;</span> <span class='p'>).</span><span class='nx'>controls</span><span class='p'>();</span>
<span class='nx'>allControllers</span><span class='p'>[</span> <span class='mi'>0</span> <span class='p'>].</span><span class='nx'>activate</span><span class='p'>(</span> <span class='mi'>0</span> <span class='p'>);</span>

<span class='c1'>//- Returns the first controller on the match</span>
<span class='kd'>var</span> <span class='nx'>control</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;.tabs&#39;</span> <span class='p'>).</span><span class='nx'>control</span><span class='p'>();</span>
<span class='nx'>control</span><span class='p'>.</span><span class='nx'>activate</span><span class='p'>(</span> <span class='mi'>0</span> <span class='p'>);</span>
</code></pre>
</div>
<h3 id='cancontrolview_'>can.Control.view <code>control.view( [ viewname ], [ data ] )</code></h3>

<p><a href='https://github.com/downloads/jupiterjs/canjs/can.control.view.1.0b2.js'>can.control.view.js</a></p>

<p><a href='http://donejs.com/docs.html#!can.Control.view'>can.Control.view</a> renders a view from a URL in a <em>views/controlname</em> folder. If no viewname is supplied it uses the current action name. If no data is provided the control instance is passed to the view. Note that you have to set a name when creating the Control construct for <em>view</em> to work.</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>(</span> <span class='s1'>&#39;Editor&#39;</span><span class='p'>,</span> <span class='p'>{</span>
  <span class='nx'>click</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>el</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// renders with views/editor/click.ejs with the controller as data</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>()</span> <span class='p'>);</span>
    <span class='c1'>// renders with views/editor/click.ejs with some data</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;The todo&#39;</span> <span class='p'>}</span> <span class='p'>)</span> <span class='p'>);</span>
    <span class='c1'>// renders with views/editor/under.ejs</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;under&#39;</span><span class='p'>,</span> <span class='p'>[</span> <span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span> <span class='p'>]</span> <span class='p'>)</span> <span class='p'>);</span>
    <span class='c1'>// renders with views/editor/under.micro</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;under.micro&#39;</span><span class='p'>,</span> <span class='p'>[</span> <span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span> <span class='p'>]</span> <span class='p'>)</span> <span class='p'>);</span>
    <span class='c1'>// renders with views/shared/top.ejs</span>
    <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>html</span><span class='p'>(</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;shared/top&#39;</span><span class='p'>,</span> <span class='p'>{</span> <span class='nx'>phrase</span><span class='o'>:</span> <span class='s1'>&#39;hi&#39;</span> <span class='p'>}</span> <span class='p'>)</span> <span class='p'>);</span>
  <span class='p'>}</span>
<span class='p'>})</span>
</code></pre>
</div>
<h3 id='view_modifiers'>View modifiers</h3>

<p>jQuery uses the modifiers <a href='http://api.jquery.com/after/'>after</a>, <a href='http://api.jquery.com/append/'>append</a>, <a href='http://api.jquery.com/before/'>before</a>, <a href='http://api.jquery.com/html/'>html</a>, <a href='http://api.jquery.com/prepend/'>prepend</a>, <a href='http://api.jquery.com/replaceWith/'>replaceWith</a> and <a href='http://api.jquery.com/text/'>text</a> to alter the content of an element. This plugin allows you to render a can.View using these modifiers. For example, you can render a template from the <em>todo/todos.ejs</em> URL looking like this:</p>
<div class='highlight'><pre><code class='erb'><span class='cp'>&lt;%</span> <span class='k'>for</span><span class='p'>(</span> <span class='n'>var</span> <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='p'>;</span> <span class='n'>i</span> <span class='o'>&lt;</span> <span class='n'>this</span><span class='o'>.</span><span class='n'>length</span><span class='p'>;</span> <span class='n'>i</span><span class='o'>++</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li&gt;</span><span class='cp'>&lt;%=</span> <span class='n'>this</span><span class='o'>[</span> <span class='n'>i</span> <span class='o'>].</span><span class='n'>name</span> <span class='cp'>%&gt;</span><span class='x'>&lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<p>By calling the <em>html</em> modifier on an element like this:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>).</span><span class='nx'>html</span><span class='p'>(</span> <span class='s1'>&#39;todo/todos.ejs&#39;</span><span class='p'>,</span> <span class='p'>[</span>
  <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;First Todo&#39;</span> <span class='p'>},</span>
  <span class='p'>{</span> <span class='nx'>name</span><span class='o'>:</span> <span class='s1'>&#39;Second Todo&#39;</span> <span class='p'>}</span>
<span class='p'>]);</span>
</code></pre>
</div>
<h2 id='examples'>Examples</h2>

<p>Check out these sweet aps built in CanJS.</p>

<h3 id='todo'>Todo</h3>

<p><img alt='CanJS Todo App' src='images/examples/todo.png' /></p>

<p>A simple todo application written in the style of <a href='https://github.com/addyosmani/todomvc/'>TodoMVC</a>. There is an implementation for each library supported by CanJS including an <strong>extra</strong> Dojo, YUI, and jQuery one using <a href='#can_control-templated_event_handlers_pt_2'>templated event binding</a> to bind to widget events. Todo is a good example of the power of <a href='#can_ejs-live_binding'>EJS&#8217;s live binding</a>.</p>

<p><strong>View the App</strong></p>

<ul>
<li><a href='http://donejs.com/examples/todo/jquery/index.html'>jQuery</a></li>

<li><a href='http://donejs.com/examples/todo/jquery-widget/index.html'>jQuery with calendar widget</a></li>

<li><a href='http://donejs.com/examples/todo/dojo/index.html'>Dojo</a></li>

<li><a href='http://donejs.com/examples/todo/dojo-widget/index.html'>Dojo with calendar widget</a></li>

<li><a href='http://donejs.com/examples/todo/mootools/index.html'>Mootools</a></li>

<li><a href='http://donejs.com/examples/todo/yui/index.html'>YUI</a></li>

<li><a href='http://donejs.com/examples/todo/yui-widget/index.html'>YUI with calendar widget</a></li>

<li><a href='http://donejs.com/examples/todo/zepto/index.html'>Zepto</a></li>
</ul>

<p><a href='https://github.com/jupiterjs/cantodo'>View the source on github</a></p>

<h3 id='canplay'>CanPlay</h3>

<p><img alt='Can Play Demo' src='http://donejs.com/examples/player/screen.png' /></p>

<p>A simple HTML5 video player application utilizing <a href='http://popcornjs.org/'>Popcorn.js</a>. We set up two <code>can.Control</code> instances to control the <code>Popcorn</code> video as well as update the position of the player. This demo makes use of <a href='#can_control-templated_event_handlers_pt_1'>Templated Event Handlers</a> by passing the <code>Popcorn</code> wrapped video element to the controller instances. The controllers then bind to events using the <code>&quot;{video}&quot;</code> templated event handler to listen and interact with the <code>video</code> element.</p>

<p><a href='http://donejs.com/examples/player/index.html'>Player</a></p>

<h3 id='srchr'>Srchr</h3>

<p>Srchr searches several data sources for content and displays it to the user. It is built using the jQuery version of CanJS and is a great example of how to create dumb, isolated widgets that are loosely coupled to the rest of the application.</p>

<p><img alt='CanJS Srchr jQuery App' src='images/examples/srchr.png' /></p>

<p><a href='http://donejs.com/examples/srchr/index.html'><strong>View the App</strong></a></p>

<p><a href='https://github.com/jupiterjs/srchr'>View the source on github</a></p>

<h2 id='why_canjs'>Why CanJS</h2>

<p>There are many libraries out there and it can be difficult to pick the one that&#8217;s right for you. In our humble opinion, the technology in CanJS is simply the best.<br />It strikes a balance between:</p>

<ul>
<li>Size</li>

<li>Ease of use</li>

<li>Safety</li>

<li>Speed</li>

<li>Flexibility</li>
</ul>

<p>The following are the reasons to use CanJS.</p>

<h3 id='size'>Size</h3>

<p>On top of jQuery, CanJS is 8.5k. Here&#8217;s some other frameworks for comparison:</p>

<ul>
<li>Backbone 8.97kb (with Underscore.js)</li>

<li>Angular 24kb</li>

<li>Knockout 13kb</li>

<li>Ember 37kb</li>

<li>Batman 15kb</li>
</ul>

<p><strong>Size is not everything</strong>. It really is what&#8217;s inside that counts. And that&#8217;s where we think CanJS really delivers a lot of bang for your buck.</p>

<h3 id='ease_of_use'>Ease of use</h3>

<p>This site highlights the most important features of CanJS. The library comes with thorough documentation and examples on the <a href='http://donejs.com/docs.html'>DoneJS documentation page</a>. There are example apps for each library and several example for jQuery.</p>

<p>CanJS is also supported by Bitovi, formerly <a href='http://jupiterjs.com'>Jupiter Consulting</a>. We are extremely active on the <a href='https://forum.javascriptmvc.com/#Forum/canjs'>forums</a>. And should the need arise, we provide support, training, and development.</p>

<h3 id='safety'>Safety</h3>

<p>Memory safety is really important, especially in long-lived, dynamic pages. CanJS combats this menace in two important and unique ways:</p>

<p><strong>Controls that unbind event handlers auto-magically</strong></p>

<p>Using <a href='#can_control-templated_event_handlers_pt_2'>templated event binding</a>, Controls can listen to events on objects other than their <a href='#can_control-element'>element</a>. For example, a tooltip listening to the window looks like:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>Tooltip</span> <span class='o'>=</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Control</span><span class='p'>({</span>
  <span class='s1'>&#39;{window} click&#39;</span><span class='o'>:</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>el</span><span class='p'>,</span> <span class='nx'>ev</span> <span class='p'>)</span> <span class='p'>{</span>
    <span class='c1'>// hide only if we clicked outside the tooltip</span>
    <span class='k'>if</span> <span class='p'>(</span><span class='o'>!</span><span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>has</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>.</span><span class='nx'>target</span> <span class='p'>)</span> <span class='p'>{</span>
      <span class='k'>this</span><span class='p'>.</span><span class='nx'>element</span><span class='p'>.</span><span class='nx'>remove</span><span class='p'>();</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
<span class='p'>})</span>

<span class='c1'>// create a Tooltip</span>
<span class='kd'>var</span> <span class='nx'>tooltipElement</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;&lt;div&gt;INFO&lt;/div&gt;&#39;</span> <span class='p'>).</span><span class='nx'>appendTo</span><span class='p'>(</span> <span class='nx'>el</span> <span class='p'>)</span>
<span class='kd'>var</span> <span class='nx'>tooltipInstance</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>Tooltip</span><span class='p'>(</span> <span class='nx'>tooltipElement</span> <span class='p'>);</span>
</code></pre>
</div>
<p><code>window</code> now has a reference to the control which keeps the <code>tooltipInstance</code> and everything the tooltip instance might reference in memory. CanJS overwrites each library&#8217;s element remove functionality to <a href='#can_control-destroy'>destroy</a> controls. Destroying a control unbinds all of its event handlers, removing any memory leaks auto-magically.</p>

<p><strong>A model store that does not leak</strong></p>

<p>It&#8217;s relatively common to load the same model instance multiple times on a single page. For example, an app might request todos due today and high-priority todos and render them like:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todosList.ejs&#39;</span><span class='p'>,</span> <span class='p'>{</span>
  <span class='nx'>todaysTodos</span><span class='o'>:</span> <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>due</span><span class='o'>:</span> <span class='s1'>&#39;today&#39;</span> <span class='p'>}</span> <span class='p'>),</span>
  <span class='nx'>criticalTodos</span><span class='o'>:</span> <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>(</span> <span class='p'>{</span> <span class='nx'>type</span><span class='o'>:</span> <span class='s1'>&#39;critical&#39;</span> <span class='p'>}</span> <span class='p'>)</span>
<span class='p'>}).</span><span class='nx'>then</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>frag</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>).</span><span class='nx'>html</span><span class='p'>(</span> <span class='nx'>frag</span> <span class='p'>);</span>
<span class='p'>})</span>
</code></pre>
</div>
<p><code>todosList.ejs</code> might look like:</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;h2&gt;Due Today&lt;/h2&gt;</span>
<span class='cp'>&lt;%</span> <span class='n'>list</span><span class='p'>(</span> <span class='n'>todaysTodos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li </span><span class='cp'>&lt;%=</span> <span class='p'>(</span><span class='n'>el</span><span class='p'>)</span> <span class='o'>-&gt;</span> <span class='n'>el</span><span class='o'>.</span><span class='n'>data</span><span class='p'>(</span> <span class='s1'>&#39;todo&#39;</span><span class='p'>,</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&gt;</span>
<span class='x'>    </span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>&lt;h2&gt;Critical Todos&lt;/h2&gt;</span>
<span class='cp'>&lt;%</span> <span class='n'>list</span><span class='p'>(</span> <span class='n'>criticalTodos</span><span class='p'>,</span> <span class='n'>function</span><span class='p'>(</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='p'>{</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;li </span><span class='cp'>&lt;%=</span> <span class='p'>(</span><span class='n'>el</span><span class='p'>)</span> <span class='o'>-&gt;</span> <span class='n'>el</span><span class='o'>.</span><span class='n'>data</span><span class='p'>(</span> <span class='s1'>&#39;todo&#39;</span><span class='p'>,</span> <span class='n'>todo</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'>&gt;</span>
<span class='x'>    </span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name&#39;</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
<span class='x'>  &lt;/li&gt;</span>
<span class='cp'>&lt;%</span> <span class='p'>}</span> <span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x' />
</code></pre>
</div>
<p>If the result for of <code>Todo.findAll( { due: &#39;today&#39; } )</code> and <code>Todo.findAll( { type: &#39;critical&#39; } )</code> both share a todo instance like:</p>
<div class='highlight'><pre><code class='javascript'><span class='p'>{</span> <span class='s2'>&quot;id&quot;</span> <span class='o'>:</span> <span class='mi'>5</span><span class='p'>,</span> <span class='s2'>&quot;name&quot;</span> <span class='o'>:</span> <span class='s2'>&quot;do dishes&quot;</span><span class='p'>,</span> <span class='s2'>&quot;due&quot;</span> <span class='o'>:</span> <span class='s2'>&quot;today&quot;</span><span class='p'>,</span> <span class='s2'>&quot;type&quot;</span> <span class='o'>:</span> <span class='s2'>&quot;critical&quot;</span> <span class='p'>}</span>
</code></pre>
</div>
<p><a href='#can_model'>can.Model</a> knows that this data represents the same todo and only creates one instance. This means that a single model instance is in both lists. By changing the todo&#8217;s name or destroying it, both lists will be changed.</p>

<p>However, model only stores these model instances while something is binding to them. Once nothing is bound to the model instance, they are removed from the store, freeing their memory for garbage collection.</p>

<h3 id='speed'>Speed</h3>

<p>The importance of performance is almost impossible to exaggerate. CanJS&#8217;s guts are highly optimized. For example, it pre-processes <a href='#can_control'>can.Control</a> event handlers so binding is super fast. But, it takes things to another level with the following two features:</p>

<p><strong>Model and view deferred support for parallel loading</strong></p>

<p><a href='#utilities-deferred'>Deferreds</a> are simply awesome for handling asynchronous behavior. <a href='#can_model'>can.Model</a> produces deferreds and <a href='#can_view'>can.view</a> consumes them. With the <a href='#plugins-view_modifiers'>view modifiers</a> plugin, you can load a template and its data in parallel and render it into an element with:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>).</span><span class='nx'>html</span><span class='p'>(</span> <span class='s1'>&#39;todos.ejs&#39;</span><span class='p'>,</span> <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>()</span> <span class='p'>);</span>
</code></pre>
</div>
<p>Hot. You can do this without the <a href='#plugins-view_modifiers'>view modifiers plugin</a> like:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>can</span><span class='p'>.</span><span class='nx'>view</span><span class='p'>(</span> <span class='s1'>&#39;todos.ejs&#39;</span><span class='p'>,</span> <span class='nx'>Todo</span><span class='p'>.</span><span class='nx'>findAll</span><span class='p'>()</span> <span class='p'>).</span><span class='nx'>then</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(</span> <span class='nx'>frag</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>$</span><span class='p'>(</span> <span class='s1'>&#39;#todos&#39;</span> <span class='p'>).</span><span class='nx'>html</span><span class='p'>(</span> <span class='nx'>frag</span> <span class='p'>);</span>
<span class='p'>})</span>
</code></pre>
</div>
<p><strong>Opt-in data binding</strong></p>

<p>Although <a href='#can_ejs'>can.EJS&#8217;s</a> live-binding is super fast, setting up live data binding can be too slow in certain situations (like rendering a list of 1000 items). EJS&#8217;s live binding is opt-in. It only turns on if you are using the <code>attr</code> method. If the following template binds to a <code>todo</code>&#8217;s <code>name</code> &#8230;</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;li&gt; </span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>attr</span><span class='p'>(</span><span class='s1'>&#39;name&#39;</span><span class='p'>)</span> <span class='cp'>%&gt;</span><span class='x'> &lt;/li&gt;</span>
</code></pre>
</div>
<p>&#8230; the following doesn&#8217;t setup live-binding and renders much faster &#8230;</p>
<div class='highlight'><pre><code class='erb'><span class='x'>&lt;li&gt; </span><span class='cp'>&lt;%=</span> <span class='n'>todo</span><span class='o'>.</span><span class='n'>name</span> <span class='cp'>%&gt;</span><span class='x'> &lt;/li&gt;</span>
</code></pre>
</div>
<h3 id='flexibility'>Flexibility</h3>

<p>Your library should not break-down as your application and organization grow and technologies change. CanJS&#8217;s flexibility will keep it valuable to you far into the future.</p>

<p><strong>Supports multiple libraries and frameworks</strong></p>

<p>Want to share code between a Zepto mobile app and a jQuery desktop app? No problem. CanJS code (especially models) can be shared across libraries, and so can skill sets! Working on a Dojo project today and a YUI one tomorrow? Don&#8217;t throw away all of your skills.</p>

<p><strong>Designed for plugins</strong></p>

<p>CanJS is extracted from <a href='http://javascriptmvc.com'>JavaScriptMVC</a>, but currently supports almost all of its MVC functionality through plugins. Start small, with its basic functionality, and extend it with <a href='#plugins'>plugins</a> that handle things like:</p>

<ul>
<li>setters</li>

<li>serialization / deserialization</li>

<li>jQuery plugin generation</li>

<li>validations</li>

<li>calling super methods</li>
</ul>

<p>These plugins have forced the core to be quite extendable, making 3rd party plugin development easy.</p>

<p><strong>Engineered limber</strong></p>

<p>CanJS&#8217;s tools are designed to work under almost every situation. Your server sends back XML with strange urls? That&#8217;s ok, overwrite <a href='http://donejs.com/docs.html#!can.Model.static.findAll'>can.Model.findAll</a> or <a href='http://donejs.com/docs.html#!can.Model.static.models'>can.Model.models</a>. Want some special teardown code for a control? Overwrite <a href='http://donejs.com/docs.html#!can.Control.prototype.destroy'>can.Control:destroy</a>.</p>

<p>But our favorite bit of flexibility is how <a href='#can_observe'>can.Observe</a> works with nested data. It converts nested objects into observes automatically. For example:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>person</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>can</span><span class='p'>.</span><span class='nx'>Observe</span><span class='p'>({</span>
  <span class='nx'>name</span><span class='o'>:</span> <span class='p'>{</span> <span class='nx'>first</span><span class='o'>:</span> <span class='s1'>&#39;Justin&#39;</span><span class='p'>,</span> <span class='nx'>last</span><span class='o'>:</span> <span class='s1'>&#39;Meyer&#39;</span> <span class='p'>},</span>
  <span class='nx'>hobbies</span><span class='o'>:</span> <span class='p'>[</span> <span class='s1'>&#39;programming&#39;</span><span class='p'>,</span> <span class='s1'>&#39;party rocking&#39;</span> <span class='p'>]</span>
<span class='p'>})</span>

<span class='nx'>person</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name.first&#39;</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;Justin&#39;</span>
<span class='nx'>person</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;hobbies.0&#39;</span> <span class='p'>)</span> <span class='c1'>//-&gt; &#39;programming&#39;</span>
</code></pre>
</div>
<p>But most important, <code>change</code> events bubble, letting observes listen for when a nested property changes:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>person</span><span class='p'>.</span><span class='nx'>bind</span><span class='p'>(</span> <span class='s1'>&#39;change&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span> <span class='nx'>ev</span><span class='p'>,</span> <span class='nx'>attr</span><span class='p'>,</span> <span class='nx'>how</span><span class='p'>,</span> <span class='nx'>newVal</span><span class='p'>,</span> <span class='nx'>oldVal</span> <span class='p'>)</span> <span class='p'>{</span>
  <span class='nx'>attr</span>   <span class='c1'>//-&gt; &#39;name.last&#39;</span>
  <span class='nx'>how</span>    <span class='c1'>//-&gt; &#39;set&#39;</span>
  <span class='nx'>newVal</span> <span class='c1'>//-&gt; &#39;Meyer&#39;</span>
  <span class='nx'>oldVal</span> <span class='c1'>//-&gt; &#39;Myer&#39;</span>
<span class='p'>});</span>

<span class='nx'>person</span><span class='p'>.</span><span class='nx'>attr</span><span class='p'>(</span> <span class='s1'>&#39;name.last&#39;</span><span class='p'>,</span> <span class='s1'>&#39;Meyer&#39;</span> <span class='p'>);</span>
</code></pre>
</div>
<h2 id='developing_canjs'>Developing CanJS</h2>

<p>To develop CanJS, add features, etc, you first must install DoneJS. DoneJS is the parent project of CanJS. DoneJS is the 4.0 version of JavaSciptMVC. It has DocumentJS and Steal as submodules that are used to generate the documentation and build the CanJS downloads.</p>

<h3 id='installing'>Installing</h3>

<ol>
<li>
<p><code>fork</code> <a href='https://github.com/jupiterjs/canjs'>CanJS on github</a>.</p>
</li>

<li>
<p>Clone DoneJS with:</p>

<pre><code>git clone git@github.com:jupiterjs/donejs</code></pre>
</li>

<li>
<p>Open the donejs folder&#8217;s .gitmodule file and change the URL of the <code>&quot;can&quot;</code> submodule:</p>

<pre><code>url = git://github.com/jupiterjs/canjs.git</code></pre>

<p>to your <code>fork</code>ed URL like</p>

<pre><code>url = git://github.com/justinbmeyer/canjs.git</code></pre>
</li>

<li>
<p>Install all submodules by running</p>

<pre><code>cd donejs
git submodule update --init --recursive</code></pre>

<p>Depending on your version of git, you might need to cd into each submodule and run <code>git checkout</code>.</p>
</li>
</ol>

<h3 id='developing'>Developing</h3>

<p>After <a href='#developing_canjs-installing'>installing</a> CanJS and DoneJS, you&#8217;ll find CanJS&#8217;s files in a <code>can</code> folder. Within <code>can</code>, you&#8217;ll find a folder for each feature of CanJS: <code>construct</code>, <code>control</code>, <code>model</code>, etc.</p>

<p>Within each <em>feature</em> folder, for example <code>construct</code>, you&#8217;ll find a file for:</p>

<ul>
<li>the implementation of the feature - <code>construct.js</code></li>

<li>a demo of the feature - <code>construct.html</code></li>

<li>an overview documentation page - <code>construct.md</code></li>

<li>the feature&#8217;s tests - <code>construct_test.js</code></li>

<li>a page to run those tests - <code>qunit.html</code></li>
</ul>

<p>Any plugins for that feature will be folders within the feature&#8217;s folder. Ex: <code>proxy</code>, <code>super</code>.</p>

<p>The <code>can/test</code> folder contains:</p>

<ul>
<li>test pages for CanJS against each library: <code>can_dojo.html</code>, <code>can_jquery.html</code>, etc.</li>

<li>a test page that tests all libraries and plugins: <code>test.html</code></li>

<li>a file that loads all <em>feature</em> tests: <code>can_test.js</code></li>
</ul>

<p>The <code>can/util</code> folder contains the compatibility layer for each library.</p>

<p>To develop CanJS:</p>

<ol>
<li>Edit the <em>feature&#8217;s</em> file.</li>

<li>Add tests to the <em>feature&#8217;s</em> test file.</li>

<li>Open the feature&#8217;s test page. Make sure it passes.</li>

<li>Open <code>can/test/test.html</code> in every browser to test everything.</li>

<li>Submit a pull request!</li>
</ol>

<h3 id='documentation'>Documentation</h3>

<p>To edit CanJS.us, installing CanJS and DoneJS is not necessary. Simply <code>fork</code> and edit the github pages&#8217;s <a href='https://github.com/jupiterjs/canjs/blob/gh-pages/index.md'>index.md page</a> online. Don&#8217;t forget to submit a pull request.</p>

<p>To edit the documentation at <a href='http://doneJS.com/docs.html'>DoneJS.com</a>:</p>

<ol>
<li>
<p><a href='#developing_canjs-installing'>install</a> CanJS and DoneJS.</p>
</li>

<li>
<p>Edit the markdown and js files in the <a href='https://github.com/jupiterjs/canjs'>CanJS github repo</a>. For example, to edit <a href='http://donejs.com/docs.html#!can.Control'>can.Control&#8217;s overview page</a>, change <a href='https://github.com/jupiterjs/canjs/blob/master/control/control.md'>can/control/control.md</a>. To edit <a href='http://donejs.com/docs.html#!can.Control.prototype.destroy'>can.Control&#8217;s destroy method</a>, change <a href='https://github.com/jupiterjs/canjs/blob/master/control/control.js#L939'>can/control/control.js</a> where you find the <code>destroy</code> comment.</p>
</li>

<li>
<p>Generate the docs with:</p>

<pre><code>js jmvc/scripts/doc.js</code></pre>

<p>View them at <code>jmvc/docs.html</code></p>
</li>

<li>
<p>Submit a pull request.</p>
</li>
</ol>

<h3 id='making_a_build'>Making a build</h3>

<p>To make the CanJS builds, run:</p>

<pre><code>js can/util/make.js</code></pre>

<p>It puts the downloads in <code>can/dist/edge</code>.</p>

<h3 id='list_of_heroes'>List of heroes</h3>

<p>The following lists everyone who&#8217;s contributed something to CanJS. If we&#8217;ve forgotten you, please add yourself.</p>

<p>First, thanks to everyone who&#8217;s contributed to <a href='https://github.com/jupiterjs/javascriptmvc/contributors'>JavaScriptMVC</a> and <a href='https://github.com/jupiterjs/jquerymx/contributors'>jQueryMX</a>, and the people at <a href='http://bitovi.com/people/'>Bitovi</a>. You deserve heaps of recognition as CanJS is direcly based off JavaScriptMVC. This page is for contributors after CanJS&#8217;s launch.</p>

<p><a href='https://github.com/yusufsafak'>yusufsafak</a> - <a href='https://github.com/jupiterjs/canjs/pull/30'>observe bindings</a>.<br /><a href='https://github.com/verto'>verto</a> - <a href='https://github.com/jupiterjs/canjs/pull/32'>destroy fix</a>.<br /><a href='https://github.com/WearyMonkey'>WearyMonkey</a> - <a href='https://github.com/jupiterjs/canjs/issues/27'>recursive observes</a>.<br /><a href='https://github.com/cohuman'>cohuman</a> - <a href='https://github.com/jupiterjs/canjs/pull/23'>model list dependencies</a>, <a href='https://github.com/jupiterjs/canjs/pull/26'>docco fix</a>.</p>

<h3 id='change_log'>Change Log</h3>

<p><strong>master</strong></p>

<ul>
<li>can.util - add: <a href='https://github.com/jupiterjs/canjs/commit/75e99f3b1545d4086ccdae259ccc87a3e8e7a018'>a util/function plugin</a></li>
</ul>

<p><strong>1.0 Beta 2</strong></p>

<ul>
<li>
<p>can.util</p>

<ul>
<li>change: <a href='https://github.com/jupiterjs/canjs/commit/234fd3b9eca18abdbc3fdbea114be6a818bfe6e3'>reverse argument order of can.each</a></li>

<li>change/fix: <a href='https://github.com/jupiterjs/canjs/issues/33'>buildFragment returns non cached frag</a></li>

<li>fix: <a href='https://github.com/jupiterjs/canjs/commit/7fe391f59a1f54e3f197f31e20276646f82e7f2e'>zepto&#8217;s isEmptyObject was broke</a></li>
</ul>
</li>

<li>
<p>can.observe</p>

<ul>
<li>feature: <a href='https://github.com/jupiterjs/canjs/issues/27'>recursive observes don&#8217;t blow up</a></li>

<li>change: <a href='https://github.com/jupiterjs/canjs/commit/234fd3b9eca18abdbc3fdbea114be6a818bfe6e3'>reverse argument order of can.each</a></li>

<li>fix: <a href='https://github.com/jupiterjs/canjs/commit/4081a9baf4441c1002467342baae3cdd885994c6'>attr change events have old value</a></li>
</ul>
</li>

<li>
<p>can.model</p>

<ul>
<li>fix: <a href='https://github.com/jupiterjs/canjs/commit/c93ae5478eea7fdb88fa6fc03211d81c8d4ca3bd'>findOne and findAll work with super</a></li>

<li>fix: <a href='https://github.com/jupiterjs/canjs/commit/14d05c29e71ed8c462ba49b740d9eb8e342d3c85'>model using custom id for store</a></li>

<li>fix: <a href='https://github.com/jupiterjs/canjs/issues/32'>destroy not working with templated id</a></li>
</ul>
</li>

<li>
<p>can.route</p>

<ul>
<li>fix: a host of bugs in libaries other than jQuery because can.route was not properly tested in other libraries.</li>

<li>fix: can.param fixed in <a href='https://github.com/jupiterjs/canjs/commit/77dfa012b2f6baa7dfb0fe84f2d62aeb5b04fc90'>dojo</a>,</li>
</ul>
</li>
</ul>

<p><strong>1.0 Beta 1</strong> (April 1st 2011)</p>

<p>Released!</p>
		</div>
	</div>
</div>
<script src="javascripts/jquery-1.7.1.js" type="text/javascript"></script>
<script src="javascripts/jquerymx-3.2.custom.js" type="text/javascript"></script>
<script src="javascripts/application.js" type="text/javascript"></script>
</body>
</html>