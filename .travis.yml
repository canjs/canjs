sudo: false
language: node_js
node_js: node
before_install:
- "wget -O $HOME/firefox-51.0.tar.bz2 https://download-installer.cdn.mozilla.net/pub/firefox/releases/51.0/linux-x86_64/en-US/firefox-51.0.tar.bz2"
- "tar xjf $HOME/firefox-51.0.tar.bz2"
- "mv firefox/ $HOME"
- "mkdir $HOME/bin"
- "ln -s $HOME/firefox/firefox $HOME/bin/firefox"
- ./firefox-allow-popups.sh
- "export DISPLAY=:99.0"
- "sh -e /etc/init.d/xvfb start"
- |
    if ! git diff --name-only $TRAVIS_COMMIT_RANGE | grep -qvE '(\.md$)|(^docs)/'
    then
      echo "Only docs were updated, skipping tests."
      exit
    fi
script: npm run ci
before_script:
  - npm run http-server &
  - sleep 2
addons:
  sauce_connect: true
