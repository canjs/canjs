<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE — ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: docs/can-guides/upgrade/using-codemods.md
	@page guides/upgrade/using-codemods
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Using Codemods | upgrade | Guides | CanJS — Build CRUD apps in fewer lines of code.</title>
	<meta name="description" content="Learn how to migrate your app to CanJS 6 using can-migrate.">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta property="og:image" content="https://www.bitovi.com/hubfs/open-source/os-canjs.png">
	<meta property="og:description" content="Learn how to migrate your app to CanJS 6 using can-migrate.">
	<meta property="og:title" content="Using Codemods | upgrade | Guides | CanJS — Build CRUD apps in fewer lines of code.">
	<script type="application/ld+json">
		{
			"@context": "http://www.schema.org",
			"@type": "SoftwareSourceCode",
			"applicationCategory": "DeveloperApplication",
			"brand": "Bitovi",
			"category": "JavaScript Frameworks",
			"codeRepository": "https://github.com/canjs/canjs",
			"description": "Learn how to migrate your app to CanJS 6 using can-migrate.",
			"image": "https://www.bitovi.com/hubfs/open-source/os-canjs.png",
			"license": "https://github.com/canjs/canjs/blob/master/license.md",
			"logo": "https://www.bitovi.com/hubfs/open-source/os-canjs.png",
			"name": "Using Codemods | upgrade | Guides | CanJS — Build CRUD apps in fewer lines of code.",
			"programmingLanguage": "JavaScript",
			"softwareVersion" : "6.6.1"
		}
	</script>
	
		<link rel="stylesheet" type="text/css" href="../../static/bundles/bit-docs-site/static.css">
		<link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64" href="/docs/images/canjs_favicon.ico">
		<link rel="apple-touch-icon" sizes="57x57" href="../../../docs/images/canjs_favicon_57x57.png">
		<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../docs/images/canjs_favicon_57x57.png">
		<link rel="apple-touch-icon" sizes="72x72" href="../../../docs/images/canjs_favicon_72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="../../../docs/images/canjs_favicon_114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="../../../docs/images/canjs_favicon_128x128.png">
		<link rel="apple-touch-icon" sizes="144x144" href="../../../docs/images/canjs_favicon_144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="../../../docs/images/canjs_favicon_152x152.png">
		<meta content="yes" name="apple-mobile-web-app-capable">
	  	<meta name="apple-mobile-web-app-status-bar-style" content="white-translucent">
	
	
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-2302003-11', 'auto');
			ga('send', 'pageview');
		</script>
	
</head>
	<body>
		<input type="checkbox" id="nav-trigger" class="nav-trigger"/>
	  	<div data-current-page="guides/upgrade/using-codemods" id="everything">
  <div class="header">
    
	<label for="nav-trigger">Menu</label>
	<div class="brand">
		<div class="logo">
			<a href="../../../index.html" alt="CanJS"></a>
			<div class="dropdown project-dropdown">
				<a href="https://donejs.com/">DoneJS</a>
				<a href="https://stealjs.com/">StealJS</a>
				<a href="https://jquerypp.com/">jQuery++</a>
				<a href="https://funcunit.com/">FuncUnit</a>
				<a href="https://documentjs.com/">DocumentJS</a>
			</div>
		</div>
		<div class="version">
			<div class="version-number">
				6.6.1
			</div>
			<div class="dropdown version-dropdown">
				
					<a href="https://v5.canjs.com">5.33.3</a>
				
					<a href="https://v4.canjs.com">4.3.0</a>
				
					<a href="https://v3.canjs.com">3.14.1</a>
				
					<a href="https://v2.canjs.com">2.3.35</a>
				
			</div>
		</div>
	</div>


	
	<ul class="top-right-links">
		
			
				
					<li class="">
						<a class="page"
							href="../../about.html"
							title="Learn about CanJS’s mission, technical highlights, who uses CanJS, and our future roadmap.">
							About
						</a>
					</li>
				
			
		
			
				
					<li class="current">
						<a class="page"
							href="../../guides.html"
							title="Welcome to CanJS! These guides are here to help you master CanJS development, get involved with the CanJS community, and contribute back to CanJS.">
							Guides
						</a>
					</li>
				
			
		
			
				
					<li class="">
						<a class="page"
							href="../../api.html"
							title="Welcome to the CanJS API documentation! This page is a CHEAT-SHEET for the most common APIs within CanJS. Read the technology-overview page for background on the following APIs.">
							API Docs
						</a>
					</li>
				
			
		
			
				
					<li class="">
						<a class="page"
							href="../../community.html"
							title="Get involved with one of the most inviting communities on the internet!">
							Community
						</a>
					</li>
				
			
		
			
				
					<li class="">
						<a class="page"
							href="../contribute.html"
							title="Learn how to contribute to CanJS!">
							Contributing
						</a>
					</li>
				
			
		
	</ul>



<div class="search-section">
	<div class="search-bar">
	<div class="search-wrap" style="display:none;">
		<span class="search-icon"></span>
		<input
			type="text"
			size="6"
			class="search"
			placeholder="Search"
			autocomplete="off"
			autocorrect="off"
			autocapitalize="none"
			spellcheck="false"/>
			<span class="search-icon-cancel"></span>
	</div>
</div>

	<div class="search-bar-container">
	</div>
	<div class="search-results-container">
	<div class="search-results-wrap"></div>
</div>

</div>
<ul class="top-right-bitovi">
	<li class="dropdown">
		<a href="https://www.bitovi.com" class="bitovi by-bitovi">Bitovi</a>
		<ul class="dropdown-menu">
			<li><a href="https://www.bitovi.com/">Bitovi.com</a></li>
			<li><a href="https://www.bitovi.com/blog">Blog</a></li>
			<li><a href="https://www.bitovi.com/design">Design</a></li>
			<li><a href="https://www.bitovi.com/development">Development</a></li>
			<li><a href="https://www.bitovi.com/training">Training</a></li>
			<li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
			<li><a href="https://www.bitovi.com/about">About</a></li>
			<li><a href="https://www.bitovi.com/contact">Contact Us</a></li>
		</ul>
	</li>
</ul>

  </div>
  <div id="left" class="column">

      <div class="nav-menu">
        
            
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../about.html"
							title="Learn about CanJS’s mission, technical highlights, who uses CanJS, and our future roadmap.">
							About
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						parent
           						expanded">
						<a class="page"
							href="../../guides.html"
							title="Welcome to CanJS! These guides are here to help you master CanJS development, get involved with the CanJS community, and contribute back to CanJS.">
							Guides
						</a>
						
	<ul>
		
			
				
					<li>
						<span>getting started</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../crud-beginner.html"
							title="Learn how to build a basic CRUD app with CanJS in 30 minutes.">
							CRUD Guide
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../setup.html"
							title="Learn how to install CanJS in your environment.">
							Setting Up CanJS
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../technology-overview.html"
							title="Learn the basics of CanJS’s technology.">
							Technology Overview
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>topics</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../html.html"
							title="Learn how to update HTML and listen to user interactions.">
							HTML
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../routing.html"
							title="Learn how to make your application respond to changes in the URL and work with the browser’s back and forward buttons.">
							Routing
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../data.html"
							title="Learn how to use can-connect to integrate service layer APIs into your CanJS application.">
							Service Layer
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../debugging.html"
							title="Learn how to debug CanJS applications.">
							Debugging
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../forms.html"
							title="Learn how to create amazing &lt;form&gt;s with CanJS.">
							Forms
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../testing.html"
							title="Learn how to test CanJS applications.">
							Testing
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../logic.html"
							title="Learn how to write observables in an organized, maintainable, and testable way.">
							Logic
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../server-side-rendering.html"
							title="Learn how to set up SSR for CanJS.">
							Server-Side Rendering
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>app guides</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../chat.html"
							title="This guide will walk you through building a real-time chat application with CanJS’s Core libraries.  It takes about 30 minutes to complete.">
							Chat Guide
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../todomvc.html"
							title="This guide will walk you through building a slightly modified version of TodoMVC with CanJS’s Core libraries and can-fixture. It takes about 1 hour to complete.">
							TodoMVC Guide
						</a>
						

					</li>
				
			
		
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/todomvc-with-steal.html"
							title="This tutorial walks through building TodoMVC with StealJS. It includes KeyNote presentations covering CanJS core libraries.">
							TodoMVC with StealJS
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>beginner recipes</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/canvas-clock.html"
							title="This beginner guide walks you through building a clock with the Canvas API.">
							Canvas Clock
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/credit-card-simple.html"
							title="This beginner guide walks through building a very simple credit card payment form.  It uses Stripe.js v2 API to create a token which can be used to create a charge.  It also performs simple validation on the payment form values.">
							Credit Card
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/file-navigator-simple.html"
							title="This beginner guide walks you through building a simple file navigation widget.  It takes about 25 minutes to complete.  It was written with CanJS 6.0.0. Check out the file-navigator-advanced for an example that makes AJAX requests for its data and uses can-stache-element.">
							File Navigator
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/signup-simple.html"
							title="This beginner guide walks through building simple signup, login forms and a logout button.">
							Signup and Login
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/video-player.html"
							title="This beginner guide walks you through building custom video controls around a video element.">
							Video Player
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/weather-report-simple.html"
							title="This beginner guide walks you through building a simple weather report widget.  It takes about 25 minutes to complete.  It was written with CanJS 6.2.">
							Weather Report
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>intermediate recipes</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/cta-bus-map.html"
							title="This intermediate guide walks you through showing Chicago Transit Authority (CTA) bus locations on a Google Map. You&#x27;ll learn how to create a StacheElement that integrates with 3rd party widgets.">
							CTA Bus Map
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/modals.html"
							title="This intermediate guide shows how to create a multiple modal form.">
							Multiple Modals
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/text-editor.html"
							title="This intermediate guide walks you through building a basic rich text editor.">
							Text Editor
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/tinder-carousel.html"
							title="This intermediate guide walks you through building a Tinder-like carousel. Learn how to build apps that use dragging user interactions.">
							Tinder Carousel
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>advanced recipes</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/credit-card-advanced.html"
							title="This advanced guide walks through building a simple credit card payment form with validations. It doesn’t use can-define. Instead it uses Kefir.js streams to make a ViewModel. can-kefir is used to make the Kefir streams observable to can-stache.">
							Credit Card
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/file-navigator-advanced.html"
							title="This advanced guide walks you through building a file navigation widget that requests data with fetch. It takes about 45 minutes to complete.">
							File Navigator
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/playlist-editor.html"
							title="Learn how to use YouTube’s API to search for videos and make a playlist.  This makes authenticated requests with OAuth2. It uses jQuery++ for drag/drop events. It shows using custom attributes and custom events.  This advanced guide takes an hour to complete.  This recipe uses YouTube API Services and follows YouTube Terms of Service and Google Privacy Policy">
							Playlist Editor
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../recipes/search-list-details.html"
							title="This advanced guide walks through building a Search, List, Details flow with lazy-loaded routes.">
							Search, List, Details
						</a>
						

					</li>
				
			
		
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>upgrade</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-3.html"
							title="This guide walks you through the step-by-step process to upgrade a 2.x app to CanJS 3.">
							Migrating to CanJS 3
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-4.html"
							title="This guide walks you through the step-by-step process to upgrade a 3.x app to CanJS 4.">
							Migrating to CanJS 4
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-5.html"
							title="This guide walks you through the process to upgrade a 4.x app to CanJS 5.x.">
							Migrating to CanJS 5
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../migrate-6.html"
							title="This guide walks you through the process to upgrade a 5.x app to CanJS 6.x.">
							Migrating to CanJS 6
						</a>
						

					</li>
				
			
		
			
				
					<li class="current
           						
           						expanded">
						<a class="page"
							href="using-codemods.html"
							title="Learn how to migrate your app to CanJS 6 using can-migrate.">
							Using Codemods
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li>
						<span>other</span>
						
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../api.html"
							title="This page walks through how to use and understand CanJS’s API documentation.">
							Reading the API Docs
						</a>
						

					</li>
				
			
		
	</ul>


					</li>
				
			
		
	</ul>


					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../api.html"
							title="Welcome to the CanJS API documentation! This page is a CHEAT-SHEET for the most common APIs within CanJS. Read the technology-overview page for background on the following APIs.">
							API Docs
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../../community.html"
							title="Get involved with one of the most inviting communities on the internet!">
							Community
						</a>
						

					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../contribute.html"
							title="Learn how to contribute to CanJS!">
							Contributing
						</a>
						

					</li>
				
			
		
	</ul>


        
      </div>
      <div class="social-side-container">
        <ul class="social-side">
  <li>
    <a class="header-mobile github" href="https://github.com/canjs/canjs" target="_blank"><img class="social-icon-small" src="../../../docs/images/github.png">GitHub</a>
  </li>
  <li>
    <a class="header-mobile twitter" href="https://twitter.com/canjs" target="_blank"><img class="social-icon-small" src="../../../docs/images/twitter.png">Twitter</a>
  </li>
</ul>
<ul class="social-side">
  <li>
    <a class="header-mobile" href="https://www.bitovi.com/community/slack" target="_blank">Chat</a>
  </li>
  <li>
    <a class="header-mobile" href="https://forums.bitovi.com/c/canjs" target="_blank">Forum</a>
  </li>
</ul>
<ul class="social-side">
  <li>
    <a class="header-mobile" href="https://www.bitovi.com/blog/topic/canjs" target="_blank">News</a>
  </li>
  <li></li>
</ul>

      </div>
      <div class="by-bitovi-container">
        <a href="https://www.bitovi.com" target="_blank" class="bitovi by-bitovi">Bitovi</a>
      </div>

  </div>
  <div id="right" class="column">

      <article>
  <section class="title">
	<div class="page-type">
		<h1>Using Codemods</h1>
			<ul class="title-social">
				
				
				<li>
					<a class="button-link" href="//github.com/canjs/canjs/edit/master/docs/can-guides/upgrade/using-codemods.md">Edit on GitHub</a>
				</li>
				
			</ul>
	</div>
	<div class="clear-both"></div>
	
  
	<section class="description">
    <p>Learn how to migrate your app to CanJS 6 using <a href="https://www.npmjs.com/package/can-migrate">can-migrate</a>.</p>

</section>

  
	
</section>
<section class="on-this-page-table">
	<!--<h2 class="on-this-page-title" data-skip>Page Content</h2>-->
</section>










  
    <section class="body">
    <h2>Overview</h2>
<p>A codemod is a transformation script that parses the <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a>
of source code in order to do a code-aware find-and-replace refactor across
multiple files. <a href="https://www.npmjs.com/package/can-migrate">can-migrate</a>
is a CLI utility for running codemods that can help migrate your app to CanJS 6.</p>
<p>For example, the following CanJS 5.0 code:</p>
<pre><code class="language-js">import { Component } from &quot;can&quot;;

Component.extend({
  tag: &quot;person-form&quot;,
  view: `
    &lt;form&gt;
      &lt;input value:bind=&quot;this.first&quot;&gt;
      &lt;input value:bind=&quot;this.last&quot;&gt;
      &lt;input value:bind=&quot;this.first&quot; type=&quot;number&quot;&gt;
    &lt;/form&gt;
  `,
  ViewModel: {
    first: &quot;string&quot;,
    last: &quot;string&quot;,
    age: &quot;number&quot;,
    description: {
      get() {
        return `${this.first} ${this.last} age ${this.age}`;
      }
    }
  }
});
</code></pre>
<p>…can be transformed to this:</p>
<pre><code class="language-js">import { StacheElement, type } from &quot;can&quot;;
import DeepObservable from &quot;can-deep-observable&quot;;

class PersonForm extends StacheElement {
  static get view() {
    return `
      &lt;form&gt;
        &lt;input value:bind=&quot;this.first&quot;&gt;
        &lt;input value:bind=&quot;this.last&quot;&gt;
        &lt;input value:bind=&quot;this.first&quot; type=&quot;number&quot;&gt;
      &lt;/form&gt;
    `;
  }

  static get props() {
    return {
      first: type.maybeConvert(String),
      last: type.maybeConvert(String),
      age: type.maybeConvert(Number),
      description: {
        get() {
          return `${this.first} ${this.last} age ${this.age}`;
        }
      }
    };
  }

  static get propertyDefaults() {
    return DeepObservable;
  }

  static get seal() {
    return true;
  }
}
customElements.define(&quot;person-form&quot;, PersonForm);
</code></pre>
<p>Using this CLI will get you most of the way to having your codebase
migrated; it’s not a complete solution for a seamless migration, but it will get
you significantly closer than doing the migration by hand.</p>
<h2>Install</h2>
<p>Install <code>can-migrate</code> from npm:</p>
<pre><code class="language-shell">npm install -g can-migrate@2
</code></pre>
<p>This will make the <code>can-migrate</code> command available globally.</p>
<h2>Usage</h2>
<p>The CLI provides the following options:</p>
<pre><code>Usage
$ can-migrate [&lt;file|glob&gt; ...]

Updates files according to the CanJS 3.0 or CanJS 4.0 migration paths (minimal, modern, future)
More info for v3.0: http://canjs.github.io/canjs/doc/migrate-3.html#Modernizedmigrationpath
More info for v4.0: http://canjs.github.io/canjs/doc/migrate-4.html

Options
--apply     -a    Apply transforms (instead of a dry run)
--force           Apply transforms regardless of git status
--silent    -s    Silence output
--config    -c    Path to custom config file
--transform -t    Specify a transform
--can-version     Specify CanJS version to upgrade to
</code></pre>
<h3>Example</h3>
<p>Runs all the <code>can-migrate</code> transforms for upgrading to CanJS 4.0 on the files that match the <code>**/*.js</code> glob:</p>
<pre><code class="language-bash">can-migrate '**/*.js' --can-version 6 --apply
</code></pre>
<p>Runs the <code>can-stache-element/can-stache-element</code> transform on the files that match the <code>**/*.js</code> glob:</p>
<pre><code class="language-bash">can-migrate '**/*.js' --transform can-stache-element/can-stache-element.js --apply
</code></pre>
<p>You can find a <a href="https://github.com/canjs/can-migrate/tree/master/src/transforms/version-6">complete list of version-6 transforms on GitHub</a>.</p>
<h2>List of CanJS 6 Transform Scripts</h2>
<p>All of the transforms below will update code in a way that is most backward compatibile with how the APIs in CanJS 5.0 work and in a way that is compatible with most web browsers.</p>
<p>This means they will:</p>
<ul>
<li>use getters for class properties like <a href="http://localhost/canjs/doc/can-stache-element/static.view" title="view">view</a> and <a href="http://localhost/canjs/doc/can-stache-element/static.props" title="props">props</a></li>
<li>make all nested objects and arrays <a href="../../can-deep-observable.html" title="Create observable objects where nested objects and arrays are also observable.">observable</a></li>
<li><a href="../../can-observable-object/object.static.seal.html" title="Defines if instances of the map should be sealed in development.">seal</a> all observables</li>
<li>make all types <a href="../../can-type.html#type_maybeConvert" title="Define types that can verify values are of the correct type, or convert values to the correct type.">non-strict</a></li>
</ul>
<p>Being cautious like this can lead to having more code in the transformed version than in the original, but it will reduce the risk of causing bugs by upgrading. The extra code can be removed over time as work is done on the transformed components.</p>
<h3>Component -&gt; StacheElement</h3>
<p><code>can-migrate</code> will transform all <a href="../../can-component.html" title="Create a custom element that can be used to manage widgets or application logic.">can-component</a>s into <a href="../../can-stache-element.html" title="Create a custom element with ObservableObject-like properties and stache views.">can-stache-element</a>s so this:</p>
<pre><code class="language-js">import { Component } from &quot;can&quot;;

Component.extend({
  tag: &quot;my-el&quot;,
  view: ``,
  ViewModel: {}
});
</code></pre>
<p>...will be transformed into this:</p>
<pre><code class="language-js">import { StacheElement } from &quot;can&quot;;
import DeepObservable from &quot;can-deep-observable&quot;;

class MyEl extends StacheElement {
  static get view() {
    return ``;
  }

  static get props() {
    return {};
  }

  static get propertyDefaults() {
    return DeepObservable;
  }

  static get seal() {
    return true;
  }
}
customElements.define(&quot;my-el&quot;, MyEl);
</code></pre>
<h3>DefineMap -&gt; ObservableObject</h3>
<p><code>can-migrate</code> will convert all <a href="../../can-define/map/map.html#newDefineMap__props__" title="Create observable objects.">instances</a> and <a href="../../can-define/map/map.extend.html" title="Define a custom map type.">extended</a> <code>DefineMap</code>s into <code>ObservableObject</code>s.</p>
<p>This:</p>
<pre><code class="language-js">import { DefineMap } from &quot;can&quot;;

const MyMap = DefineMap.extend(&quot;MyMapConstructor&quot;, {
  prop: {
    default() {
      return new DefineMap({});
    }
  }
});
</code></pre>
<p>...will be transformed into this:</p>
<pre><code class="language-js">import { ObservableObject } from &quot;can&quot;;
import DeepObservable from &quot;can-deep-observable&quot;;

class MyMap extends ObservableObject {
  static get props() {
    return {
      prop: {
        get default() {
          return new ObservableObject({});
        }
      }
    };
  }

  static get propertyDefaults() {
    return DeepObservable;
  }

  static get seal() {
    return true;
  }
}
</code></pre>
<h3>DefineList -&gt; ObservableArray</h3>
<p><code>can-migrate</code> will convert all <a href="../../can-define/list/list.html#newDefineList__props__" title="Create observable lists.">instances</a> and <a href="../../can-define/list/list.extend.html" title="Define a custom list type.">extended</a> <code>DefineList</code>s into <code>ObservableArray</code>s.</p>
<p>This:</p>
<pre><code class="language-js">import { DefineMap, DefineList } from &quot;can&quot;;

const MyMap = DefineMap.extend(&quot;MyMapConstructor&quot;, {
  prop: {
    default() {
      return new DefineMap({});
    }
  }
});

const MyList = DefineList.extend(&quot;MyListConstructor&quot;, {
  &quot;#&quot;: MyMap,

  selected: {
    default() {
      return new DefineList([]);
    }
  }
});
</code></pre>
<p>...will be transformed into this:</p>
<pre><code class="language-js">import { ObservableArray, ObservableObject, type } from &quot;can&quot;;
import DeepObservable from &quot;can-deep-observable&quot;;

class MyMap extends ObservableObject {
  static get props() {
    return {
      prop: {
        get default() {
          return new ObservableObject({});
        }
      }
    };
  }

  static get propertyDefaults() {
    return DeepObservable;
  }

  static get seal() {
    return true;
  }
}

class MyList extends ObservableArray {
  static get props() {
    return {
      selected: {
        get default() {
          return new ObservableArray([]);
        }
      }
    };
  }

  static get items() {
    return type.maybeConvert(MyMap);
  }
}
</code></pre>
<h3>Property Definitions</h3>
<p><code>can-migrate</code> will handle converting all property <a href="../../can-observable-object/object.types.definitionObject.html" title="Defines the type, initial value, and get, set, and serialize behavior for an
observable property.  These behaviors can be specified with as an Object,
Constructor function, or a can-type.typeobject.">definitions</a> and <a href="../../can-observable-object/object.types.property.html" title="">shorthands</a> to syntax compatible with <code>ObservableObject</code>. This makes several minor changes.</p>
<p>This:</p>
<pre><code class="language-js">import { DefineMap } from &quot;can&quot;;

const MyMap = DefineMap.extend(&quot;MyMapConstructor&quot;, {
  aString: &quot;string&quot;,
  aNumber: &quot;number&quot;,
  aBoolean: &quot;boolean&quot;,
  aDate: &quot;date&quot;,
  anything: &quot;any&quot;,
  anObjectType: { Type: Thing },
  anObject: { Defaul: Thing },
  anotherString: { type: &quot;string&quot; },
  anotherNumber: { type: &quot;number&quot; },
  anotherBoolean: { type: &quot;boolean&quot; },
  anotherDate: { type: &quot;date&quot; },
  anotherAnything: { type: &quot;any&quot; },
  doNotSerialize: { serialize: false },
  anotherObject: {
    default() {
      return { /* ... */ };
    }
  },
  aGetter: {
    get() { /* ... */ }
  },
  anAsyncGetter: {
    get(lastSet, resolve) { /* ... */ }
  }
});
</code></pre>
<p>...will be transformed to this:</p>
<pre><code class="language-js">import { ObservableObject, type } from &quot;can&quot;;

class MyMap extends ObservableObject {
  static get props() {
    return {
      aString: type.maybeConvert(String),
      aNumber: type.maybeConvert(Number),
      aBoolean: type.maybeConvert(Boolean),
      aDate: type.maybeConvert(Date),
      anything: type.Any,
      anObjectType: { type: type.maybeConvert(Thing) },
      anObject: { Defaul: Thing },
      anotherString: { type: type.maybeConvert(String) },
      anotherNumber: { type: type.maybeConvert(Number) },
      anotherBoolean: { type: type.maybeConvert(Boolean) },
      anotherDate: { type: type.maybeConvert(Date) },
      anotherAnything: { type: type.Any },
      doNotSerialize: { enumerable: false },
      anotherObject: {
        get default() {
          return { /* ... */ };
        }
      },
      aGetter: {
        get() { /* ... */ }
      },
      anAsyncGetter: {
        async(resolve, lastSet) { /* ... */ }
      }
    };
  }
}
</code></pre>
<h3>Component Events</h3>
<p>The <a href="../../can-component.prototype.events.html" title="Listen to events on elements and observables.">events</a> object on <a href="../../can-component.html" title="Create a custom element that can be used to manage widgets or application logic.">Component</a> will be replaced with a <a href="../../can-control.html" title="Create organized, memory-leak free, rapidly performing, stateful controls with declarative event binding. Use Control to create UI
controls like tabs, grids, and context menus,
and organize them into higher-order business rules with
can.route. It can serve as both a traditional view and a traditional controller.">can-control</a> that is instantiated in the <a href="../../can-stache-element/lifecycle-hooks.connected.html" title="A lifecycle hook called after the element is inserted into the document.">connected hook</a>.</p>
<p>This:</p>
<pre><code class="language-js">import { Component } from &quot;can&quot;;

Component.extend({
  tag: &quot;my-element&quot;,
  view: `&lt;button&gt;Increment {{ this.count }}&lt;/button&gt;`,
  ViewModel: {
    count: {
      default: 0
    }
  },

  events: {
      &quot;button click&quot;: function() {
        this.viewModel.count++;
      }
  }
});
</code></pre>
<p>...becomes this:</p>
<pre><code class="language-js">import { StacheElement, Control } from &quot;can/everything&quot;;

class MyElement extends StacheElement {
  static view = `&lt;button&gt;Increment {{ this.count }}&lt;/button&gt;`;
  static props = {
    count: 0
  };
  connected() {
    const EventsControl = Control.extend({
      &quot;button click&quot;: function() {
        this.element.count++;
      }
    });
    new EventsControl(this);
  }
}
customElements.define(&quot;my-element&quot;, MyElement);
</code></pre>
<h3>Map and List on restModel and realTimeRestModel</h3>
<p>The <code>Map</code> and <code>List</code> options will be replaced when passed as options to <a href="../../can-rest-model.html" title="Connect a type to a restful service layer.">can-rest-model</a> (or <a href="../../can-realtime-rest-model.html" title="Connect a type to a restful data source and automatically manage lists.">can-realtime-rest-model</a>):</p>
<pre><code class="language-js">Todo.connection = restModel({
  Map: TodoList,
  List: Todo,
  url: &quot;/api/todos/{id}&quot;
});
</code></pre>
<p>...becomes:</p>
<pre><code class="language-js">Todo.connection = restModel({
  ArrayType: TodoList,
  ObjectType: Todo,
  url: &quot;/api/todos/{id}&quot;
});
</code></pre>
<p>The properties returned by the <code>restModel</code> and <code>realtimeRestModel</code> functions will also be renamed. This:</p>
<pre><code class="language-js">const Todo = realtimeRestModel(&quot;/api/todos/{id}&quot;).Map;
</code></pre>
<p>...becomes:</p>
<pre><code class="language-js">const Todo = realtimeRestModel(&quot;/api/todos/{id}&quot;).ObjectType;
</code></pre>
<p>...and this:</p>
<pre><code class="language-js">const TodoList = realtimeRestModel(&quot;/api/todos/{id}&quot;).List;
</code></pre>
<p>...becomes:</p>
<pre><code class="language-js">const TodoList = realtimeRestModel(&quot;/api/todos/{id}&quot;).ArrayType;
</code></pre>

</section>

  


<script type="text/javascript">
  window.docObject = {"src":{"path":"docs/can-guides/upgrade/using-codemods.md"},"description":"Learn how to migrate your app to CanJS 6 using [can-migrate](https://www.npmjs.com/package/can-migrate). \n","name":"guides/upgrade/using-codemods","title":"Using Codemods","type":"page","parent":"guides/upgrade","order":4,"comment":" ","pathToRoot":"../../.."};
</script>
</article>
      
        <footer><p>CanJS is part of <a href="https://donejs.com" target="_blank">DoneJS</a>. Created and maintained by the core <a href="https://donejs.com/About.html#team" target="_blank">DoneJS team</a> and <a href="https://www.bitovi.com" target="_blank">Bitovi</a>. <strong>Currently 6.6.1.</strong></p>
</footer>
      

  </div>
  <div id="toc-sidebar" class="column">
    <nav>
      <h1 class="hide">On this page</h1>
    </nav>
    <div class="get-help">
      <h1>Get help</h1>
      <ul>
        <li><a href="https://www.bitovi.com/community/slack" target="_blank" class="icon-slack">Chat with us</a></li>
        <li><a href="https://github.com/canjs/canjs/issues/new" target="_blank" class="icon-github">File an issue</a></li>
        <li><a href="https://forums.bitovi.com/c/canjs" target="_blank" class="icon-forums">Ask questions</a></li>
        <li><a href="https://www.bitovi.com/blog/topic/canjs" target="_blank" class="icon-blog">Read latest news</a></li>
      </ul>
    </div>
  </div>
</div>

		
			<script>
				steal = {
				  	instantiated: {
				    	"bundles/bit-docs-site/static.css!$css" : null
				  	}
			  	};
			</script>
			<script type='text/javascript' data-main="bit-docs-site/static" src="../../static/steal.production.js"></script>
		
		<script async defer src="https://buttons.github.io/buttons.js"></script>

		<!-- root-level elements with attributes necessary for the app -->
		<div path-prefix="../.."></div>

	</body>
</html>
